(function(t){function e(e){for(var s,l,o=e[0],r=e[1],c=e[2],p=0,u=[];p<o.length;p++)l=o[p],i[l]&&u.push(i[l][0]),i[l]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);d&&d(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var r=a[o];0!==i[r]&&(s=!1)}s&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},i={index:0},n=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=r;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("64a9"),i=a.n(s);i.a},"096e":function(t,e,a){"use strict";var s=a("efba"),i=a.n(s);i.a},1323:function(t,e,a){},"1ae6":function(t,e,a){},"27d5":function(t,e,a){"use strict";var s=a("c8b3"),i=a.n(s);i.a},"34f1":function(t,e,a){},"3e54":function(t,e){e.install=function(t){t.prototype.sureView=function(t,e,a){this.$confirm('此操作将永久删除<strong style="color: red;">'+a+"</strong>,是否继续?","提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t(e)}).catch(()=>{})},t.prototype.messageShow=function(t,e){return 0===e.data["status"]?(t.$message({showClose:!0,message:e.data["msg"],type:"warning"}),!1):(e.data["msg"]&&t.$message({showClose:!0,message:e.data["msg"],type:"success"}),!0)}}},"4cff":function(t,e,a){},"4fcb":function(t,e,a){"use strict";var s=a("d720"),i=a.n(s);i.a},5217:function(t,e,a){"use strict";var s=a("1ae6"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=a("5c96"),n=a.n(i),l=(a("0fae"),a("ed2c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)}),o=[],r={name:"app",data(){return{}},methods:{},mounted(){}},c=r,d=(a("034f"),a("2877")),p=Object(d["a"])(c,l,o,!1,null,null,null);p.options.__file="App.vue";var u=p.exports,m=a("bc3a"),h=a.n(m),f=a("8c4f"),g=a("2f62");const v="login",b="logout",w="title",y="userName",D="roles";s["default"].use(g["a"]);var x=new g["a"].Store({state:{userName:null,token:null,title:"",roles:null},mutations:{[v]:(t,e)=>{localStorage.token=e,t.token=e},[y]:(t,e)=>{localStorage.userName=e,t.userName=e},[D]:(t,e)=>{localStorage.roles=e,t.roles=e},[b]:t=>{localStorage.removeItem("token"),t.token=null},[w]:(t,e)=>{t.title=e}}}),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"caseHeader"},[a("el-container",[a("el-container",[a("el-header",{staticStyle:{height:"30px"}},[a("el-dropdown",{staticStyle:{float:"right","line-height":"20px",top:"6px",color:"rgb(255, 255, 255)"},on:{command:t.logOut}},[a("span",{staticClass:"el-dropdown-link"},[t._v(t._s(t.userName)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{staticStyle:{"line-height":"10px"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"b"}},[t._v("修改密码")]),a("el-dropdown-item",{attrs:{command:"a"}},[t._v("退出系统")])],1)],1)],1)],1)],1),a("el-dialog",{attrs:{title:"修改密码",visible:t.passwordData.formVisible,width:"30%",customClass:"password-style"},on:{"update:visible":function(e){t.$set(t.passwordData,"formVisible",e)}}},[a("el-form",[a("el-form-item",{attrs:{label:"旧密码","label-width":t.passwordData.formLabelWidth}},[a("el-input",{attrs:{type:"password"},model:{value:t.passwordData.oldPassword,callback:function(e){t.$set(t.passwordData,"oldPassword",e)},expression:"passwordData.oldPassword"}})],1),a("el-form-item",{attrs:{label:"新密码","label-width":t.passwordData.formLabelWidth}},[a("el-input",{attrs:{type:"password"},model:{value:t.passwordData.newPassword,callback:function(e){t.$set(t.passwordData,"newPassword",e)},expression:"passwordData.newPassword"}})],1),a("el-form-item",{attrs:{label:"确认密码","label-width":t.passwordData.formLabelWidth}},[a("el-input",{attrs:{type:"password"},model:{value:t.passwordData.surePassword,callback:function(e){t.$set(t.passwordData,"surePassword",e)},expression:"passwordData.surePassword"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.passwordData.formVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.changePassword()}}},[t._v("确 定")])],1)],1)],1)},k=[],C={name:"caseHeader",data(){return{title:["项目管理","项目"],userName:"",passwordData:{oldPassword:"",newPassword:"",surePassword:"",formVisible:!1,formLabelWidth:"80px"}}},methods:{getUserName(){this.userName=this.$store.state.userName},changePassword(){this.$axios.post(this.$api.changePasswordApi,{oldPassword:this.passwordData.oldPassword,newPassword:this.passwordData.newPassword,surePassword:this.passwordData.surePassword}).then(t=>{this.messageShow(this,t)&&(this.passwordData.formVisible=!1)})},logOut(t){"a"===t?(this.$store.commit(b),this.$router.push({path:"/login"}),this.$axios.get(this.$api.logoutApi).then(t=>{0===t.data["status"]?this.$message({showClose:!0,message:t.data["msg"],type:"warning"}):this.tableData=t.data["msg"]})):"b"===t&&(this.passwordData.oldPassword="",this.passwordData.newPassword="",this.passwordData.surePassword="",this.passwordData.formVisible=!0)},showTitle(t){"/manage/projectManage"===t?this.title=["接口管理","项目管理"]:"/manage/caseManage"===t?this.title=["接口管理","接口信息"]:"/manage/sceneConfig"===t?this.title=["接口管理","业务配置"]:"/manage/sceneManage"===t?this.title=["接口管理","接口用例"]:"/manage/buildInFunc"===t?this.title=["接口管理","内置函数"]:"/manage/reportManage"===t?this.title=["报告管理","接口报告"]:"/manage/taskManage"===t?this.title=["报告管理","定时任务"]:"/manage/userManage"===t?this.title=["系统管理","用户管理"]:"/manage/testTool"===t?this.title=["其他程序","测试小工具"]:"/manage/batch"===t?this.title=["其他程序","批量操作"]:"/manage/sqlCheck"===t&&(this.title=["其他程序","数据库查询"])},getTitle:function(){this.showTitle(this.$route.path)}},watch:{$route:function(t){this.showTitle(t.path)}},mounted(){this.getTitle(),this.getUserName()}},S=C,$=(a("b388"),Object(d["a"])(S,_,k,!1,null,null,null));$.options.__file="header.vue";var A=$.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"this.loading"}],staticClass:"caseManage"},[a("el-form",{staticClass:"demo-form-inline search-style",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"项目",labelWidth:"80px"}},[a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{placeholder:"请选择项目"},on:{change:t.initProjectChoice},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}},t._l(t.proAndIdData,function(t){return a("el-option",{key:t.name,attrs:{value:t.name}})}),1),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择配置",clearable:"","value-key":"configId"},model:{value:t.form.config,callback:function(e){t.$set(t.form,"config",e)},expression:"form.config"}},t._l(t.configData[this.form.projectName],function(t){return a("el-option",{key:t.configId,attrs:{label:t.name,value:t}})}),1)],1),"third"!==t.numTab?a("el-form-item",{attrs:{label:"接口名称"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入",clearable:""},model:{value:t.form.apiName,callback:function(e){t.$set(t.form,"apiName",e)},expression:"form.apiName"}})],1):t._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(e){t.handleCurrentChange(1)}}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.initData()}}},[t._v("录入接口信息")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.apiTest(t.apiMsgList)}}},[t._v("测试\n            ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-view"},nativeOn:{click:function(e){t.$refs.resultFunc.lastResult()}}},[t._v(t._s(null)+"\n            ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.$refs.importApiFunc.initData()}}},[t._v("导入信息")]),null!==t.form.config&&""!==t.form.config?a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.$refs.configEditFunc.editSceneConfig(t.form.config.configId)}}},[t._v("配置修改\n            ")]):t._e()],1)],1),a("el-tabs",{staticClass:"table_padding",on:{"tab-click":t.tabChange},model:{value:t.numTab,callback:function(e){t.numTab=e},expression:"numTab"}},[a("el-tab-pane",{attrs:{label:"接口信息",name:"first"}},[a("el-row",[a("el-col",{staticStyle:{border:"1px solid","border-color":"#ffffff rgb(234, 234, 234) #ffffff #ffffff"},attrs:{span:3}},[a("el-row",[a("el-col",{staticStyle:{border:"1px solid","border-color":"#ffffff #ffffff rgb(234, 234, 234) #ffffff",padding:"2px"}},[a("el-dropdown",{staticStyle:{float:"right"},on:{command:t.moduleCommand}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#4ae2d5"}},[t._v("\n                                    操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"add"}},[t._v("添加")]),a("el-dropdown-item",{attrs:{command:"edit"}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"stick"}},[t._v("置顶")]),a("el-dropdown-item",{attrs:{command:"del"}},[t._v("删除")])],1)],1)],1)],1),a("el-row",[a("el-scrollbar",{attrs:{wrapStyle:"height:740px;"}},[a("el-tree",{ref:"testTree",staticClass:"filter-tree",attrs:{"highlight-current":"","node-key":"moduleId",data:t.moduleDataList,props:t.defaultProps},on:{"node-click":t.treeClick}})],1),a("el-pagination",{attrs:{small:"","current-page":t.modulePage.currentPage,"page-size":30,layout:"prev, pager, next",total:t.modulePage.total},on:{"current-change":t.handleModuleCurrentChange}})],1)],1),a("el-col",{staticStyle:{"padding-left":"5px"},attrs:{span:21}},[a("el-table",{ref:"apiMultipleTable",attrs:{data:t.ApiMsgTableData,stripe:"","max-height":"745"},on:{"selection-change":t.handleApiMsgSelection}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),a("el-table-column",{attrs:{prop:"num",label:"编号",width:"60"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"接口名称",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"url",label:"接口地址"}}),a("el-table-column",{attrs:{label:"操作",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},nativeOn:{click:function(a){t.editCopyApi(t.ApiMsgTableData[e.$index]["apiMsgId"],"edit")}}},[t._v("\n                                    编辑\n                                ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-tickets",size:"mini"},nativeOn:{click:function(a){t.editCopyApi(t.ApiMsgTableData[e.$index]["apiMsgId"],"copy")}}},[t._v("\n                                    复制\n                                ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.sureView(t.delApi,t.ApiMsgTableData[e.$index]["apiMsgId"],t.ApiMsgTableData[e.$index]["name"])}}},[t._v("\n                                    删除\n                                ")])]}}])})],1),a("el-button",{staticStyle:{position:"absolute","margin-top":"2px"},attrs:{size:"mini"},on:{click:function(e){t.cancelSelection()}}},[t._v("\n                        取消选择\n                    ")]),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.apiMsgPage.currentPage,"page-size":t.apiMsgPage.sizePage,layout:"total, sizes, prev, pager, next, jumper",total:t.apiMsgPage.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)],1)],1),t.apiEditViewStatus?a("el-tab-pane",{staticStyle:{"background-color":"rgb(250, 250, 250)","min-height":"780px"},attrs:{label:"接口配置",name:"second"}},[a("apiEdit",{ref:"apiFunc",attrs:{projectName:t.form.projectName,module:t.form.module,configData:t.form.config,proModelData:t.proModelData,proUrlData:t.proUrlData},on:{findApiMsg:t.findApiMsg,apiTest:t.apiTest}})],1):t._e()],1),a("el-dialog",{attrs:{title:"接口模块配置",visible:t.moduleData.viewStatus,width:"30%"},on:{"update:visible":function(e){t.$set(t.moduleData,"viewStatus",e)}}},[a("el-form",[a("el-form-item",{attrs:{label:"模块名称","label-width":"100px"}},[a("el-input",{model:{value:t.moduleData.name,callback:function(e){t.$set(t.moduleData,"name",e)},expression:"moduleData.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.moduleData.viewStatus=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.addModule()}}},[t._v("确 定")])],1)],1),a("importApi",{ref:"importApiFunc",attrs:{projectName:t.form.projectName,moduleData:t.form.module}}),a("result",{ref:"resultFunc"}),a("errorView",{ref:"errorViewFunc"}),a("configEdit",{ref:"configEditFunc",attrs:{proModelData:t.proModelData,projectName:t.form.projectName,funcAddress:t.funcAddress}})],1)},j=[],z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result"},[a("el-dialog",{attrs:{title:"测试结果",visible:t.resultViewStatus,width:"45%"},on:{"update:visible":function(e){t.resultViewStatus=e}}},[a("el-collapse",{attrs:{accordion:""}},t._l(t.resultData.resultShowData,function(e,s){return a("el-collapse-item",{key:s},[a("template",{slot:"title"},[a("div",{style:e.attachment?"color:rgb(255, 74, 74)":"color:#45b90c"},[t._v(t._s(e.name))])]),a("el-tabs",{attrs:{type:"card"}},[a("el-tab-pane",{attrs:{label:"返回结果"}},[a("el-scrollbar",{attrs:{wrapStyle:"max-height:540px;"}},[a("div",[a("pre",{staticStyle:{overflow:"auto"}},[t._v(t._s(t.resultDeal(e.meta_datas.data[0].response.json)))])])])],1),e.attachment?a("el-tab-pane",{attrs:{label:"错误信息"}},[a("div",[a("pre",{staticStyle:{overflow:"auto"}},[t._v(t._s(e.attachment))])])]):t._e(),a("el-tab-pane",{attrs:{label:"返回信息"}},t._l(e.meta_datas.data[0].response,function(e,s){return a("div",{key:s},["{}"!==JSON.stringify(e)&&"start_timestamp"!==s&&e&&"json"!==s?a("div",{staticStyle:{color:"#409eff"}},[t._v("\n                                "+t._s(s)+"：\n                                "),a("div",{staticStyle:{color:"#000000"}},[t._v(t._s(e))])]):t._e()])}),0),a("el-tab-pane",{attrs:{label:"请求信息"}},t._l(e.meta_datas.data[0].request,function(e,s){return a("div",{key:s},["{}"!==JSON.stringify(e)&&"timeout"!==s&&"verify"!==s&&e&&"body"!==s?a("div",{staticStyle:{color:"#409eff"}},[t._v("\n                                "+t._s(s)+"：\n                                "),a("pre",{staticStyle:{overflow:"auto",color:"#000000"}},[t._v(t._s(e))])]):t._e()])}),0)],1)],2)}),1)],1)],1)},N=[],P={name:"result",data(){return{resultViewStatus:!1,resultData:{out:"",resultShowData:[{name:null,attachment:null,meta_datas:{data:[{request:{body:null,url:null,headers:null,data:null,params:null,json:null},response:{content:null,json:null}}]}}]}}},methods:{resultDeal(t){try{t=JSON.parse(t),t=JSON.stringify(t,null,4)}catch(e){}return t},lastResult(){this.resultViewStatus=!0},showData(t){this.resultViewStatus=!0,this.resultData.resultShowData=t["details"][0]["records"]}}},T=P,F=Object(d["a"])(T,z,N,!1,null,null,null);F.options.__file="result.vue";var O=F.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"importApi"},[a("el-dialog",{attrs:{title:"接口信息导入",visible:t.importApiData.importApiStatus,width:"30%"},on:{"update:visible":function(e){t.$set(t.importApiData,"importApiStatus",e)}}},[a("el-form",[a("el-form-item",{attrs:{label:"请选择导入格式"}},[a("el-radio-group",{model:{value:t.importApiData.importFormat,callback:function(e){t.$set(t.importApiData,"importFormat",e)},expression:"importApiData.importFormat"}},[a("el-radio",{attrs:{label:"HAR"}}),a("el-radio",{attrs:{label:"postman(JSON)"}})],1)],1)],1),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"文件地址"}},[a("el-input",{attrs:{size:"medium",disabled:!0},model:{value:t.importApiData.importApiAddress,callback:function(e){t.$set(t.importApiData,"importApiAddress",e)},expression:"importApiData.importApiAddress"}})],1),a("el-form-item",[a("el-upload",{staticClass:"upload-demo",attrs:{action:this.$api.fileUploadingApi,"show-file-list":!1,"on-success":t.getFileAddress}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.importApiData.importApiStatus=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.importCase()}}},[t._v("确 定")])],1)],1)],1)},E=[],L={name:"importApi",props:["projectName","moduleData"],data(){return{importApiData:{importApiStatus:!1,importFormat:null,importApiAddress:null}}},methods:{initData(){this.moduleData?(this.importApiData.importFormat=null,this.importApiData.importApiAddress=null,this.importApiData.importApiStatus=!0):this.$message({showClose:!0,message:"请选择模块",type:"warning"})},getFileAddress(t,e){0===t["status"]?this.$confirm("服务器已存在相同名字文件，是否覆盖?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=new FormData;t.append("file",e.raw),t.append("skip","1"),this.$axios.post("/api/upload",t).then(t=>{this.$message({showClose:!0,message:t.data["msg"],type:"success"}),this.importApiData.importApiAddress=t["data"]["data"]})}).catch(()=>{}):(t["msg"]&&this.$message({showClose:!0,message:t["msg"],type:"success"}),this.importApiData.importApiAddress=t["data"])},importCase(){this.$axios.post(this.$api.importApiApi,{importApiAddress:this.importApiData.importApiAddress,projectName:this.projectName,moduleId:this.moduleData.moduleId,importFormat:this.importApiData.importFormat}).then(t=>{this.messageShow(this,t)&&(this.importApiData.importApiStatus=!1,this.importApiData.importApiAddress=null,this.$parent.findApiMsg())})}},mounted(){}},I=L,W=Object(d["a"])(I,V,E,!1,null,null,null);W.options.__file="importApi.vue";var R=W.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apiEdit"},[a("el-form",{staticStyle:{padding:"10px 20px -10px 10px"},attrs:{inline:!0}},[a("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"基础信息",labelWidth:"80px"}},[a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{placeholder:"请选择项目",size:"small"},on:{change:t.changeProChoice},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}},t._l(t.proModelData,function(t,e){return a("el-option",{key:e,attrs:{value:e}})}),1),a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{placeholder:"请选择模块","value-key":"moduleId",size:"small"},model:{value:t.form.module,callback:function(e){t.$set(t.form,"module",e)},expression:"form.module"}},t._l(t.proModelData[this.form.projectName],function(t){return a("el-option",{key:t.moduleId,attrs:{label:t.name,value:t}})}),1),a("el-select",{attrs:{clearable:"",placeholder:"请选择url",size:"small"},model:{value:t.form.choiceUrl,callback:function(e){t.$set(t.form,"choiceUrl",e)},expression:"form.choiceUrl"}},t._l(t.proUrlData[this.form.projectName],function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t.apiMsgData.id?a("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"接口编号","label-width":"80px",prop:"num"}},[a("el-input",{staticStyle:{width:"70px","text-align":"center"},attrs:{placeholder:"接口编号",size:"small"},model:{value:t.apiMsgData.num,callback:function(e){t.$set(t.apiMsgData,"num",t._n(e))},expression:"apiMsgData.num"}})],1):t._e(),a("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"接口名称",size:"small"},model:{value:t.apiMsgData.name,callback:function(e){t.$set(t.apiMsgData,"name",e)},expression:"apiMsgData.name"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"set_up_hooks",size:"small"},model:{value:t.apiMsgData.upFunc,callback:function(e){t.$set(t.apiMsgData,"upFunc",e)},expression:"apiMsgData.upFunc"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"set_down_hooks",size:"small"},model:{value:t.apiMsgData.downFunc,callback:function(e){t.$set(t.apiMsgData,"downFunc",e)},expression:"apiMsgData.downFunc"}})],1)],1),a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid rgb(241, 215, 215)","margin-top":"-5px"}}),a("el-form",{staticStyle:{margin:"0 0 0 10px"}},[a("el-form-item",[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"80%","margin-right":"5px"},attrs:{placeholder:"Enter request URL"},model:{value:t.apiMsgData.url,callback:function(e){t.$set(t.apiMsgData,"url",e)},expression:"apiMsgData.url"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"medium",placeholder:"选择请求方式"},slot:"prepend",model:{value:t.apiMsgData.method,callback:function(e){t.$set(t.apiMsgData,"method",e)},expression:"apiMsgData.method"}},t._l(t.methods,function(t){return a("el-option",{key:t,attrs:{value:t,label:t}})}),1),a("el-button",{attrs:{slot:"append",type:"primary"},on:{click:function(e){t.ParamViewStatus=!t.ParamViewStatus}},slot:"append"},[t._v("\n                    Params\n                ")])],1),a("el-button",{attrs:{type:"primary",size:"medium",loading:this.saveRunStatus},nativeOn:{click:function(e){t.saveAndRun()}}},[t._v("Send\n            ")]),a("el-button",{attrs:{type:"primary",size:"medium"},nativeOn:{click:function(e){t.addApiMsg()}}},[t._v("Save")])],1)],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:this.ParamViewStatus,expression:"this.ParamViewStatus"}],staticStyle:{width:"98.2%","margin-top":"-20px",left:"10px"},attrs:{data:t.apiMsgData.param,"row-style":{"background-color":"rgb(250, 250, 250)"},size:"mini","show-header":!1}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"value",id:"param_input"+e.$index,type:"textarea",rows:"1",resize:"none"},on:{focus:function(a){t.showLine("param_input",e.$index)},input:function(e){t.changeLine()},blur:function(a){t.resetLine(e.$index)}},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delTableRow("param",e.$index)}}})]}}])})],1),a("el-tabs",{staticStyle:{margin:"0 0 0 10px"},model:{value:t.bodyShow,callback:function(e){t.bodyShow=e},expression:"bodyShow"}},[a("el-tab-pane",{attrs:{label:"Headers",name:"first"}},[a("el-table",{staticClass:"h-b-e-a-style",attrs:{data:t.apiMsgData.header,size:"mini",stripe:"","show-header":!1,"row-style":{"background-color":"rgb(250, 250, 250)"}}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"value"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"备注"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delTableRow("header",e.$index)}}})]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"Body",name:"second",disabled:"GET"===t.apiMsgData.method}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[a("el-radio-group",{model:{value:t.form.choiceType,callback:function(e){t.$set(t.form,"choiceType",e)},expression:"form.choiceType"}},[a("el-radio",{attrs:{label:"data"}},[t._v("form-data")]),a("el-radio",{attrs:{label:"json"}},[t._v("raw")]),a("el-radio",{attrs:{label:"text"}},[t._v("text")])],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"json"===t.form.choiceType,expression:"form.choiceType === 'json'"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){t.formatData()}}},[t._v("格式化\n\n                ")])],1),a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid rgb(241, 215, 215)"}}),"json"===t.form.choiceType?a("div",[a("div",{staticStyle:{border:"1px solid rgb(234, 234, 234)"}},[a("el-container",[a("editor",{directives:[{name:"contextmenu",rawName:"v-contextmenu:contextmenu",arg:"contextmenu"}],staticStyle:{"font-size":"15px"},attrs:{lang:"json",theme:"chrome",width:"100%",height:"575px",options:{}},on:{init:t.editorInit},model:{value:t.apiMsgData.jsonVariable,callback:function(e){t.$set(t.apiMsgData,"jsonVariable",e)},expression:"apiMsgData.jsonVariable"}})],1)],1)]):t._e(),"data"===t.form.choiceType||"text"===t.form.choiceType?a("el-table",{staticStyle:{"background-color":"rgb(250, 250, 250)"},attrs:{data:t.apiMsgData.variable,size:"mini",stripe:"","show-header":!1,height:"582","row-style":{"background-color":"rgb(250, 250, 250)"}}},[a("el-table-column",{attrs:{label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{label:"type","header-align":"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{size:"mini"},model:{value:e.row.param_type,callback:function(a){t.$set(e.row,"param_type",a)},expression:"scope.row.param_type"}},t._l(t.paramTypes,function(t){return a("el-option",{key:t,attrs:{value:t}})}),1)]}}])}),a("el-table-column",{attrs:{label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return["file"===e.row.param_type?a("div",[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{size:"mini",disabled:!0},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})],1),a("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:2}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/upload","show-file-list":!1,"on-success":t.fileChange}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.tempNum(e.$index)}}},[t._v("点击上传\n                                        ")])],1)],1)],1)],1):a("div",[a("el-input",{attrs:{id:"data_input"+e.$index,type:"textarea",rows:"1",size:"mini",resize:"none"},on:{focus:function(a){t.showLine("data_input",e.$index)},input:function(e){t.changeLine()},blur:function(e){t.resetLine()}},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})],1)]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delTableRow("variable",e.$index)}}})]}}])})],1):t._e()],1),a("el-tab-pane",{attrs:{label:"Extract",name:"third"}},[a("el-table",{staticClass:"h-b-e-a-style",attrs:{data:t.apiMsgData.extract,size:"mini",stripe:"","show-header":!1,"row-style":{"background-color":"rgb(250, 250, 250)"}}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"value"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"备注"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delTableRow("extract",e.$index)}}})]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"Assert",name:"fourth"}},[a("el-table",{staticClass:"h-b-e-a-style",attrs:{data:t.apiMsgData.validate,size:"mini",stripe:"","show-header":!1,"row-style":{"background-color":"rgb(250, 250, 250)"}}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{label:"Comparator","header-align":"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请选择",size:"mini"},model:{value:e.row.comparator,callback:function(a){t.$set(e.row,"comparator",a)},expression:"scope.row.comparator"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"value"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"备注"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delTableRow("validate",e.$index)}}})]}}])})],1)],1)],1),a("v-contextmenu",{ref:"contextmenu"},[a("v-contextmenu-item",{on:{click:t.handleClick}},[t._v("clear")])],1),a("result",{ref:"resultFunc"}),a("errorView",{ref:"errorViewFunc"})],1)},U=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"errorView"},[a("el-dialog",{attrs:{title:"错误信息",visible:t.viewStatus,width:"50%"},on:{"update:visible":function(e){t.viewStatus=e}}},[a("el-scrollbar",{attrs:{wrapStyle:"height:700px;"}},[a("pre",{staticStyle:{color:"#d04a4a"}},[t._v(t._s(t.errorData))])])],1)],1)},B=[],J={name:"errorView",data(){return{viewStatus:!1,errorData:""}},methods:{showData(t){this.viewStatus=!0,this.errorData=t}}},K=J,G=Object(d["a"])(K,q,B,!1,null,null,null);G.options.__file="errorView.vue";var Y=G.exports,Q={components:{editor:a("7c9e"),result:O,errorView:Y},name:"apiEdit",props:["proModelData","projectName","module","proUrlData","configData"],data(){return{bodyShow:"second",paramTypes:["string","file"],cell:Object(),saveRunStatus:!1,ParamViewStatus:!1,temp_num:"",methods:["POST","GET","PUT","DELETE"],form:{projectName:null,configName:null,suiteName:null,apiName:null,module:{name:null,moduleId:null},choiceUrl:"基础url1",choiceType:"data"},comparators:[{value:"equals"},{value:"less_than"},{value:"less_than_or_equals"},{value:"greater_than"},{value:"greater_than_or_equals"},{value:"not_equals"},{value:"string_equals"},{value:"length_equals"},{value:"length_greater_than"},{value:"count_greater_than_or_equals"},{value:"length_less_than"},{value:"length_less_than_or_equals"}],apiMsgData:{id:null,project:null,method:"POST",status_url:null,name:null,num:null,desc:null,funcAddress:null,upFunc:null,downFunc:null,formLabelWidth:"80px",url:"",param:[{key:null,value:null}],header:Array(),variable:[],jsonVariable:"",extract:Array(),validate:Array()}}},methods:{editorInit(){a("2099"),a("818b"),a("95b8"),a("b039")},handleClick(){this.apiMsgData.jsonVariable=""},changeProChoice(){this.form.module="",this.form.choiceUrl=""},querySearch(t,e){e(this.comparators)},formatData(){try{this.apiMsgData.jsonVariable=JSON.parse(this.apiMsgData.jsonVariable),this.apiMsgData.jsonVariable=JSON.stringify(this.apiMsgData.jsonVariable,null,4)}catch(t){this.$message({showClose:!0,message:"json格式错误",type:"warning"})}},fileChange(t,e){0===t["status"]?this.$confirm("服务器已存在相同名字文件，是否覆盖?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=new FormData;t.append("file",e.raw),t.append("skip","1"),this.$axios.post("/api/upload",t).then(t=>{this.$message({showClose:!0,message:t.data["msg"],type:"success"}),this.apiMsgData.variable[this.temp_num]["value"]=t.data["data"]})}).catch(()=>{}):(t["msg"]&&this.$message({showClose:!0,message:t["msg"],type:"success"}),this.apiMsgData.variable[this.temp_num]["value"]=t["data"])},tempNum(t){this.temp_num=t},initApiMsgData(){this.form.choiceType="data",this.form.choiceUrl=String(),this.apiMsgData.header=Array(),this.apiMsgData.variable=Array(),this.apiMsgData.param=Array(),this.apiMsgData.jsonVariable="",this.apiMsgData.extract=Array(),this.apiMsgData.validate=Array(),this.apiMsgData.name=null,this.apiMsgData.num=null,this.apiMsgData.funcAddress=null,this.apiMsgData.upFunc=null,this.apiMsgData.downFunc=null,this.apiMsgData.desc=null,this.apiMsgData.id=null,this.apiMsgData.url=String(),this.form.projectName=this.projectName,this.form.module=this.module},addApiMsg(t=!1){if(this.apiMsgData.jsonVariable)try{JSON.parse(this.apiMsgData.jsonVariable)}catch(e){return void this.$message({showClose:!0,message:"json格式错误",type:"warning"})}if(this.form.projectName)return this.$axios.post(this.$api.addApiApi,{moduleId:this.form.module.moduleId,projectName:this.form.projectName,apiMsgName:this.apiMsgData.name,num:this.apiMsgData.num,choiceUrl:this.proUrlData[this.form.projectName].indexOf(this.form.choiceUrl),variableType:this.form.choiceType,desc:this.apiMsgData.desc,funcAddress:this.apiMsgData.funcAddress,upFunc:this.apiMsgData.upFunc,downFunc:this.apiMsgData.downFunc,url:this.apiMsgData.url,apiMsgId:this.apiMsgData.id,param:JSON.stringify(this.apiMsgData.param),header:JSON.stringify(this.apiMsgData.header),variable:JSON.stringify(this.apiMsgData.variable),jsonVariable:this.apiMsgData.jsonVariable,extract:JSON.stringify(this.apiMsgData.extract),method:this.apiMsgData.method,validate:JSON.stringify(this.apiMsgData.validate)}).then(e=>{return t?e:this.messageShow(this,e)?(this.apiMsgData.id=e.data["api_msg_id"],this.apiMsgData.num=e.data["num"],!0):void 0});this.$message({showClose:!0,message:"请选择项目",type:"warning"})},editCopyApiMsg(t,e){this.$axios.post(this.$api.editAndCopyApiApi,{apiMsgId:t}).then(a=>{this.apiMsgData.name=a.data["data"]["name"],"edit"===e?(this.apiMsgData.num=a.data["data"]["num"],this.apiMsgData.id=t):(this.apiMsgData.num="",this.apiMsgData.id=""),this.apiMsgData.variable=a.data["data"]["variable"],a.data["data"]["json_variable"]?this.apiMsgData.jsonVariable=a.data["data"]["json_variable"]:this.apiMsgData.jsonVariable="",this.apiMsgData.desc=a.data["data"]["desc"],this.apiMsgData.funcAddress=a.data["data"]["funcAddress"],this.apiMsgData.upFunc=a.data["data"]["up_func"],this.apiMsgData.downFunc=a.data["data"]["down_func"],this.apiMsgData.url=a.data["data"]["url"],this.apiMsgData.header=a.data["data"]["header"],this.form.choiceType=a.data["data"]["variableType"],this.apiMsgData.param=a.data["data"]["param"],this.apiMsgData.extract=a.data["data"]["extract"],this.apiMsgData.validate=a.data["data"]["validate"],this.apiMsgData.method=a.data["data"]["method"],this.form.choiceUrl=this.proUrlData[this.projectName][a.data["data"]["status_url"]],this.form.projectName=this.projectName,this.form.module=this.module})},saveAndRun(){this.addApiMsg(!0).then(t=>{0===t.data["status"]?this.$message({showClose:!0,message:t.data["msg"],type:"warning"}):(this.apiMsgData.id=t.data["api_msg_id"],this.apiMsgData.num=t.data["num"],this.$emit("apiTest",[{apiMsgId:t.data["api_msg_id"],num:"1"}],!1))})},resetLine(){this.cell.style.height="18px"},showLine(t,e){this.cell=document.getElementById(t+e),this.cell.style.height=this.cell.scrollHeight+"px"},changeLine(){if(this.cell.style.height!==this.cell.scrollHeight+"px"){let t=parseInt(this.cell.style.height.substring(0,this.cell.style.height.length-2));t-this.cell.scrollHeight===2?this.cell.style.height=t-18+"px":this.cell.style.height=this.cell.scrollHeight+"px"}},delTableRow(t,e){"variable"===t?this.apiMsgData.variable.splice(e,1):"header"===t?this.apiMsgData.header.splice(e,1):"validate"===t?this.apiMsgData.validate.splice(e,1):"extract"===t?this.apiMsgData.extract.splice(e,1):"param"===t&&this.apiMsgData.param.splice(e,1)},addTableRow(t){"variable"===t?this.apiMsgData.variable.push({key:null,value:null,param_type:"string",remark:null}):"header"===t?this.apiMsgData.header.push({key:null,value:null}):"validate"===t?this.apiMsgData.validate.push({key:null,value:null}):"extract"===t?this.apiMsgData.extract.push({key:null,value:null,remark:null}):"param"===t&&this.apiMsgData.param.push({key:null,value:null})}},computed:{monitorParam(){return this.apiMsgData.param},monitorUrl(){return this.apiMsgData.url},monitorMethod(){return this.apiMsgData.method},monitorVariable(){return this.apiMsgData.variable},monitorHeader(){return this.apiMsgData.header},monitorExtract(){return this.apiMsgData.extract},monitorValidate(){return this.apiMsgData.validate}},watch:{monitorParam:{handler:function(){0===this.apiMsgData.param.length?this.addTableRow("param"):(this.apiMsgData.param[this.apiMsgData.param.length-1]["key"]||this.apiMsgData.param[this.apiMsgData.param.length-1]["value"])&&this.addTableRow("param");let t="";for(let e in this.apiMsgData.param)parseInt(e)+2===this.apiMsgData.param.length&&this.apiMsgData.param[e].key?this.apiMsgData.param[e].value?t+=this.apiMsgData.param[e].key+"="+this.apiMsgData.param[e].value:t+=this.apiMsgData.param[e].key:this.apiMsgData.param[e].key&&(t+=this.apiMsgData.param[e].key+"="+this.apiMsgData.param[e].value+"&");"&"===t.substr(t.length-1,1)&&(t=t.substring(0,t.length-1)),this.apiMsgData.url=t?this.apiMsgData.url.split("?")[0]+"?"+t:this.apiMsgData.url.split("?")[0]},deep:!0},monitorUrl(){if(!this.apiMsgData.url)return void(this.apiMsgData.param=[{key:"",value:""}]);if(-1===this.apiMsgData.url.indexOf("?"))return void(this.apiMsgData.param=[{key:"",value:""}]);let t=this.apiMsgData.url.split("?");if(t.splice(0,1),t=t.join("?"),!t)return void(this.apiMsgData.param=[{key:"",value:""}]);let e=t.split("&");if(e[0]){this.apiMsgData.param=Array();for(let t=0;t<e.length;t++)if(-1!==e[t].indexOf("=")){let a=e[t].split("="),s=a[0];a.splice(0,1),this.apiMsgData.param.push({key:s,value:a.join("=")})}else this.apiMsgData.param.push({key:e[t],value:""})}},monitorMethod(t){"GET"===t&&(this.bodyShow="first")},monitorVariable:{handler:function(){0===this.apiMsgData.variable.length&&this.addTableRow("variable"),(this.apiMsgData.variable[this.apiMsgData.variable.length-1]["key"]||this.apiMsgData.variable[this.apiMsgData.variable.length-1]["value"])&&this.addTableRow("variable")},deep:!0},monitorExtract:{handler:function(){0===this.apiMsgData.extract.length&&this.addTableRow("extract"),(this.apiMsgData.extract[this.apiMsgData.extract.length-1]["key"]||this.apiMsgData.extract[this.apiMsgData.extract.length-1]["value"])&&this.addTableRow("extract")},deep:!0},monitorHeader:{handler:function(){0===this.apiMsgData.header.length&&this.addTableRow("header"),(this.apiMsgData.header[this.apiMsgData.header.length-1]["key"]||this.apiMsgData.header[this.apiMsgData.header.length-1]["value"])&&this.addTableRow("header")},deep:!0},monitorValidate:{handler:function(){0===this.apiMsgData.validate.length&&this.addTableRow("validate"),(this.apiMsgData.validate[this.apiMsgData.validate.length-1]["key"]||this.apiMsgData.validate[this.apiMsgData.validate.length-1]["value"])&&this.addTableRow("validate")},deep:!0}},mounted(){}},X=Q,Z=Object(d["a"])(X,H,U,!1,null,null,null);Z.options.__file="apiEdit.vue";var tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"configEdit"},[a("el-dialog",{attrs:{title:"配置管理",visible:t.configData.modelFormVisible,width:"50%"},on:{"update:visible":function(e){t.$set(t.configData,"modelFormVisible",e)}}},[a("el-tabs",{attrs:{value:"second"}},[a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"基础信息",name:"second"}},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-select",{attrs:{placeholder:"请选择项目",size:"small"},model:{value:t.configData.projectName,callback:function(e){t.$set(t.configData,"projectName",e)},expression:"configData.projectName"}},t._l(t.proModelData,function(t,e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1),a("el-form-item",{attrs:{label:"配置名称"}},[a("el-input",{attrs:{size:"small"},model:{value:t.configData.name,callback:function(e){t.$set(t.configData,"name",e)},expression:"configData.name"}})],1)],1),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"函数文件"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择导入函数文件",size:"small"},model:{value:t.configData.funcAddress,callback:function(e){t.$set(t.configData,"funcAddress",e)},expression:"configData.funcAddress"}},t._l(this.funcAddress,function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}),1)],1),t.configData.id?a("el-form-item",{attrs:{label:"配置序号"}},[a("el-input",{attrs:{size:"small"},model:{value:t.configData.num,callback:function(e){t.$set(t.configData,"num",t._n(e))},expression:"configData.num"}})],1):t._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addConfigVariable()}}},[t._v("添加变量")])],1)],1),a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid rgb(241, 215, 215)","margin-top":"-5px"}}),a("el-table",{attrs:{data:t.configData.variable,stripe:"","show-header":!1}},[a("el-table-column",{attrs:{label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"Value"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"备注"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delConfigVariable(e.$index)}}},[t._v("删除\n                            ")])]}}])})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.configData.modelFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.addSceneConfig()}}},[t._v("确 定")])],1)],1)],1)},at=[],st={name:"configEdit",props:["proModelData","funcAddress","projectName"],data(){return{configData:{funcAddress:Array(),id:null,num:null,modelFormVisible:!1,projectName:null,name:null,formLabelWidth:"80px"}}},methods:{initConfigData(){this.configData.name=null,this.configData.projectName=this.projectName,this.configData.funcAddress=Array(),this.configData.id=null,this.configData.num=null,this.configData.variable=[{key:null,value:null,remark:null}],this.configData.modelFormVisible=!0},addConfigVariable(){this.configData.variable.push({key:null,value:null,remark:null})},delConfigVariable(t){this.configData.variable.splice(t,1)},addSceneConfig(){this.$axios.post(this.$api.addConfigApi,{projectName:this.configData.projectName,sceneConfigName:this.configData.name,funcAddress:this.configData.funcAddress,num:this.configData.num,id:this.configData.id,variable:JSON.stringify(this.configData.variable)}).then(t=>{this.messageShow(this,t)&&(this.configData.modelFormVisible=!1,"function"===typeof this.$parent.findConfig&&this.$parent.findConfig())})},editSceneConfig(t){t?this.$axios.post(this.$api.editConfigApi,{id:t}).then(e=>{this.configData.name=e.data["data"]["name"],this.configData.num=e.data["data"]["num"],this.configData.variable=e.data["data"]["variables"],this.configData.funcAddress=e.data["data"]["func_address"],this.configData.projectName=this.projectName,this.configData.id=t,this.configData.modelFormVisible=!0}):this.$message({showClose:!0,message:"请选择配置",type:"warning"})}},mounted(){}},it=st,nt=Object(d["a"])(it,et,at,!1,null,null,null);nt.options.__file="configEdit.vue";var lt=nt.exports,ot={components:{result:O,importApi:R,apiEdit:tt,errorView:Y,configEdit:lt},name:"caseManage",data(){return{apiEditViewStatus:!1,numTab:"first",loading:!1,proModelData:"",proAndIdData:"",configData:"",proUrlData:null,ApiMsgTableData:Array(),apiMsgList:Array(),funcAddress:null,moduleDataList:[],defaultProps:{children:"children",label:"name"},apiMsgPage:{total:1,currentPage:1,sizePage:20},modulePage:{total:1,currentPage:1,sizePage:30},moduleData:{viewStatus:!1,id:"",num:"",name:""},form:{config:{name:"",configId:""},module:{name:"",moduleId:"",num:""},projectName:null,projectId:null,suiteName:null,apiName:null}}},methods:{initBaseData(){this.$axios.get(this.$api.baseDataApi).then(t=>{this.proModelData=t.data["data"],this.proAndIdData=t.data["pro_and_id"],this.configData=t.data["config_name_list"],this.proUrlData=t.data["urlData"],t.data["user_pro"]&&(this.form.projectName=t.data["user_pro"]["pro_name"],this.configData[this.form.projectName][0]&&(this.form.config=this.configData[this.form.projectName][0]),this.findModule()),this.$axios.post(this.$api.getFuncAddressApi).then(t=>{this.funcAddress=t["data"]["data"]})})},moduleCommand(t){"add"===t?this.initModuleData():"edit"===t?this.editModule():"stick"===t?this.stickModule():"del"===t&&this.sureView(this.delModule,null,this.form.module.name)},handleCurrentChange(t){this.apiMsgPage.currentPage=t,this.findApiMsg()},handleSizeChange(t){this.apiMsgPage.sizePage=t,this.findApiMsg()},findApiMsg(){null!==this.form.module?this.$axios.post(this.$api.findApiApi,{apiName:this.form.apiName,projectName:this.form.projectName,moduleId:this.form.module.moduleId,page:this.apiMsgPage.currentPage,sizePage:this.apiMsgPage.sizePage}).then(t=>{this.messageShow(this,t)&&(this.ApiMsgTableData=t.data["data"],this.apiMsgPage.total=t.data["total"])}):this.$message({showClose:!0,message:"请选择模块",type:"warning"})},initData(){this.form.module?(this.apiEditViewStatus=!0,this.numTab="second",setTimeout(()=>{this.$refs.apiFunc.initApiMsgData()},0)):this.$message({showClose:!0,message:"请先创建接口模块",type:"warning"})},editCopyApi(t,e){this.apiEditViewStatus=!0,this.numTab="second",setTimeout(()=>{this.$refs.apiFunc.editCopyApiMsg(t,e)},0)},delApi(t){this.$axios.post(this.$api.delApiApi,{apiMsgId:t}).then(t=>{this.messageShow(this,t),this.form.apiName=null,(this.apiMsgPage.currentPage-1)*this.apiMsgPage.sizePage+1===this.apiMsgPage.total&&(this.apiMsgPage.currentPage=this.apiMsgPage.currentPage-1),this.findApiMsg()})},apiTest(t=null){this.loading=!0,this.$axios.post(this.$api.runApiApi,{apiMsgData:t,projectName:this.form.projectName,configId:this.form.config.configId}).then(t=>{0===t.data["status"]?(this.$message({showClose:!0,message:t.data["msg"],type:"warning"}),t.data["error"]&&this.$refs.errorViewFunc.showData(t.data["error"])):(this.$message({showClose:!0,message:t.data["msg"],type:"success"}),this.$refs.resultFunc.showData(t["data"]["data"])),this.loading=!1})},handleApiMsgSelection(t){this.apiMsgList=t},cancelSelection(){this.$refs.apiMultipleTable.clearSelection()},initProjectChoice(){this.form.config={name:null,configId:null},this.form.module={name:null,moduleId:null},this.modulePage.currentPage=1,this.apiMsgPage.currentPage=1,this.findModule()},findModule(){this.$axios.post(this.$api.findModuleApi,{projectName:this.form.projectName,page:this.modulePage.currentPage,sizePage:this.modulePage.sizePage}).then(t=>{this.messageShow(this,t)&&(this.moduleDataList=t.data["data"],this.proModelData[this.form.projectName]=t.data["all_module"],this.modulePage.total=t.data["total"],this.form.module=this.moduleDataList[0],this.form.module?(this.$nextTick(function(){this.$refs.testTree.setCurrentKey(this.form.module.moduleId)}),this.findApiMsg()):this.ApiMsgTableData=[])})},tabChange(t){"接口信息"===t.label&&this.findApiMsg()},treeClick(t){let e=this.moduleDataList.map(t=>t.moduleId).indexOf(t["moduleId"]);this.form.module=this.moduleDataList[e],this.apiMsgPage.currentPage=1,this.findApiMsg()},handleModuleCurrentChange(t){this.modulePage.currentPage=t,this.findModule()},initModuleData(){this.moduleData.name="",this.moduleData.id="",this.moduleData.num="",this.moduleData.viewStatus=!0},editModule(){this.form.module?(this.moduleData.name=this.form.module.name,this.moduleData.id=this.form.module.moduleId,this.moduleData.num=this.form.module.num,this.moduleData.viewStatus=!0):this.$message({showClose:!0,message:"请先创建接口模块",type:"warning"})},addModule(){this.$axios.post(this.$api.addModuleApi,{projectName:this.form.projectName,name:this.moduleData.name,id:this.moduleData.id,num:this.moduleData.num}).then(t=>{this.messageShow(this,t)&&(this.moduleData.viewStatus=!1,this.findModule())})},delModule(){this.$axios.post(this.$api.delModuleApi,{id:this.form.module.moduleId}).then(t=>{this.messageShow(this,t),this.moduleData.name="",(this.modulePage.currentPage-1)*this.modulePage.sizePage+1===this.modulePage.total&&(this.modulePage.currentPage=this.modulePage.currentPage-1),this.findModule()})},stickModule(){this.$axios.post(this.$api.stickModuleApi,{id:this.form.module.moduleId,projectName:this.form.projectName}).then(t=>{this.messageShow(this,t),this.findModule()})}},mounted(){this.initBaseData()}},rt=ot,ct=(a("27d5"),Object(d["a"])(rt,M,j,!1,null,null,null));ct.options.__file="apiMsg.vue";var dt=ct.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"manage"}},[a("el-container",[a("el-aside",{staticStyle:{"min-height":"936px"},attrs:{width:"auto"}},[a("div",{staticClass:"menu-toggle",on:{click:function(e){return e.preventDefault(),t.collapse(e)}}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!t.collapsed,expression:"!collapsed"}],staticClass:"my-icon-xiangzuo-copy"}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.collapsed,expression:"collapsed"}],staticClass:"my-icon-xiangyou"})]),a("el-scrollbar",{attrs:{"wrap-class":"specialList"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.navigationName,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",router:!0,collapse:t.collapsed}},[a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-document"}),a("span",[t._v("接口管理")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/manage/projectManage"}},[t._v("项目管理")]),a("el-menu-item",{attrs:{index:"/manage/caseManage"}},[t._v("接口信息")]),a("el-menu-item",{attrs:{index:"/manage/sceneConfig"}},[t._v("业务配置")]),a("el-menu-item",{attrs:{index:"/manage/sceneManage"}},[t._v("接口用例")]),a("el-menu-item",{attrs:{index:"/manage/buildInFunc"}},[t._v("内置函数")])],1)],2),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-time"}),a("span",[t._v("报告管理")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/manage/reportManage"}},[t._v("测试报告")])],1),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/manage/taskManage"}},[t._v("定时任务")])],1)],2),a("el-submenu",{attrs:{index:"5"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-time"}),a("span",[t._v("其他程序")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/manage/testTool"}},[t._v("小工具")])],1)],2),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:"2"===t.role,expression:"role === '2'"}],attrs:{index:"4"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),a("span",[t._v("系统管理")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/manage/userManage"}},[t._v("用户管理")])],1)],2)],1)],1)],1),a("el-container",[a("el-header",{staticStyle:{height:"30px"}},[a("router-view",{staticClass:"view one",attrs:{name:"Header"}})],1),a("v-tags",{directives:[{name:"show",rawName:"v-show",value:t.tagsShow,expression:"tagsShow"}]}),a("el-main",[a("keep-alive",{attrs:{include:t.tagsList}},[t.isRouterAlive?a("router-view",{staticClass:"view two",staticStyle:{"font-family":"Arial"},attrs:{name:"Manage"}}):t._e()],1)],1)],1)],1)],1)},ut=[],mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showTags?a("div",{staticClass:"tags"},[a("ul",{staticStyle:{margin:"1px","padding-left":"2px"}},t._l(t.tagsList,function(e,s){return a("li",{directives:[{name:"contextmenu",rawName:"v-contextmenu:contextmenu",arg:"contextmenu"}],key:s,staticClass:"tags-li",class:{active:t.isActive(e.path)},on:{contextmenu:function(a){a.preventDefault(),t.getItem(e)}}},[a("router-link",{staticClass:"tags-li-title",attrs:{to:e.path}},[t._v("\n                    "+t._s(e.title)+"\n                ")]),a("span",{staticClass:"tags-li-icon",on:{click:function(e){t.closeTags(s)}}},[a("i",{staticClass:"el-icon-close"})])],1)}),0),a("v-contextmenu",{ref:"contextmenu"},[a("v-contextmenu-item",{on:{click:t.refreshE}},[t._v("刷新")])],1)],1):t._e()},ht=[];const ft=new s["default"];var gt=ft,vt={data(){return{tagsList:[],tempItem:""}},methods:{isActive(t){return t===this.$route.fullPath},getItem(t){this.tempItem=t},refreshE(){gt.$emit("refreshE",this.tempItem)},closeTags(t){const e=this.tagsList.splice(t,1)[0],a=this.tagsList[t]?this.tagsList[t]:this.tagsList[t-1];a?e.path===this.$route.fullPath&&this.$router.push(a.path):this.$router.push("/")},closeAll(){this.tagsList=[],this.$router.push("/")},closeOther(){const t=this.tagsList.filter(t=>{return t.path===this.$route.fullPath});this.tagsList=t},setTags(t){const e=this.tagsList.some(e=>{return e.path===t.fullPath});e||(this.tagsList.length>=8&&this.tagsList.shift(),this.tagsList.push({title:t.meta.title,path:t.fullPath,name:t.matched[1].components.Manage.name})),gt.$emit("tags",this.tagsList)},handleTags(t){"other"===t?this.closeOther():this.closeAll()}},computed:{showTags(){return this.tagsList.length>0}},watch:{$route(t){this.setTags(t)}},created(){this.setTags(this.$route),gt.$on("close_current_tags",()=>{for(let t=0,e=this.tagsList.length;t<e;t++){const a=this.tagsList[t];a.path===this.$route.fullPath&&(t<e-1?this.$router.push(this.tagsList[t+1].path):t>0?this.$router.push(this.tagsList[t-1].path):this.$router.push("/"),this.tagsList.splice(t,1))}})}},bt=vt,wt=(a("fa4c"),Object(d["a"])(bt,mt,ht,!1,null,null,null));wt.options.__file="Tags.vue";var yt=wt.exports,Dt={name:"manage",components:{vTags:yt},data(){return{isRouterAlive:!0,tagsList:[],tagsShow:!0,navigationName:"/manage/projectManage",collapsed:!1,role:"",userName:""}},methods:{collapse:function(){this.collapsed=!this.collapsed},closeNavigation(){this.role=this.$store.state.roles,this.userName=this.$store.state.userName,this.navigationName=this.$route.path,"/manage/reportShow"===this.$route.path&&(this.collapsed=!0,this.tagsShow=!1)}},watch:{$route:function(t){this.navigationName=t.path,t.path}},mounted(){this.closeNavigation()},created(){gt.$on("refreshE",t=>{let e=this.tagsList.indexOf(t.name);this.tagsList.splice(e,1),this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0,this.tagsList.push(t.name)})}),gt.$on("tags",t=>{let e=[];for(let a=0,s=t.length;a<s;a++)t[a].name&&e.push(t[a].name);this.tagsList=e})}},xt=Dt,_t=(a("c693"),Object(d["a"])(xt,pt,ut,!1,null,null,null));_t.options.__file="manage.vue";var kt=_t.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"projectManage"},[a("el-form",{staticClass:"demo-form-inline search-style",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"项目名称",labelWidth:"110px"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(e){t.proHandleCurrentChange(1)}}},[t._v("\n                搜索\n            ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.initProjectData()}}},[t._v("添加项目\n            ")])],1)],1),a("el-tabs",{staticStyle:{"padding-left":"10px"},attrs:{value:"first"}},[a("el-tab-pane",{staticClass:"table_padding",attrs:{label:"项目列表",name:"first"}},[a("el-table",{attrs:{data:t.tableData,stripe:"","max-height":"745"}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"150"}}),a("el-table-column",{attrs:{label:"当前环境"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:"first"===t.tableData[e.$index]["choice"]?"success":"second"===t.tableData[e.$index]["choice"]?"primary":"third"===t.tableData[e.$index]["choice"]?"warning":"danger"}},[t._v("\n                            "+t._s(t.environmentShow(t.tableData[e.$index]["choice"]))+"\n                        ")])]}}])}),a("el-table-column",{attrs:{prop:"principal",label:"负责人",width:"150"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},nativeOn:{click:function(a){t.editProject(t.tableData[e.$index]["id"])}}},[t._v("编辑\n                        ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.sureView(t.delProject,t.tableData[e.$index]["id"],t.tableData[e.$index]["name"])}}},[t._v("\n                            删除\n                        ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.sizePage,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"current-change":t.proHandleCurrentChange,"size-change":t.proHandleSizeChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"项目配置",visible:t.projectData.modelFormVisible,width:"40%","modal-append-to-body":!1,"append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.$set(t.projectData,"modelFormVisible",e)}}},[a("el-tabs",[a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"基础信息"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"项目名称","label-width":t.projectData.formLabelWidth}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",id:"project_name"},model:{value:t.projectData.projectName,callback:function(e){t.$set(t.projectData,"projectName",e)},expression:"projectData.projectName"}})],1),a("el-form-item",{attrs:{label:"负责人","label-width":"60px"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{"value-key":"user_id",id:"user",size:"mini"},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}},t._l(t.userData,function(t){return a("el-option",{key:t.user_id,attrs:{label:t.user_name,value:t}})}),1)],1),a("el-form-item",{attrs:{label:"函数文件","label-width":t.projectData.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择导入函数文件",size:"mini",clearable:""},model:{value:t.projectData.funcFile,callback:function(e){t.$set(t.projectData,"funcFile",e)},expression:"projectData.funcFile"}},t._l(t.funcAddress,function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}),1)],1)],1),a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid rgb(241, 215, 215)","margin-top":"-10px"}}),a("el-tabs",{attrs:{type:"card"},model:{value:t.environmentChoice,callback:function(e){t.environmentChoice=e},expression:"environmentChoice"}},[a("el-tab-pane",{attrs:{label:"测试环境",name:"first"}},[a("el-table",{attrs:{data:t.environment.environmentTest,size:"mini",stripe:"","show-header":!1}},[a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"http://127.0.0.1:8010"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delTableRow("test",e.$index)}}})]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"开发环境",name:"second"}},[a("el-table",{attrs:{data:t.environment.environmentDevelop,size:"mini",stripe:"","show-header":!1}},[a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"http://127.0.0.1:8010"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delTableRow("develop",e.$index)}}})]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"线上环境",name:"third"}},[a("el-table",{attrs:{data:t.environment.environmentProduction,size:"mini",stripe:"","show-header":!1}},[a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"http://127.0.0.1:8010"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delTableRow("production",e.$index)}}})]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"备用环境",name:"fourth"}},[a("el-table",{attrs:{data:t.environment.environmentStandby,size:"mini",stripe:"","show-header":!1}},[a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"http://127.0.0.1:8010"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delTableRow("standby",e.$index)}}})]}}])})],1)],1)],1)],1),a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"公用变量"}},[a("span",{staticStyle:{"margin-left":"10px"}},[t._v("变量信息：")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addProjectVariable()}}},[t._v("\n                    添加\n                ")]),a("el-table",{attrs:{data:t.projectData.variable,stripe:"","show-header":!1,size:"mini"}},[a("el-table-column",{attrs:{label:"Key","header-align":"center",minWidth:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"key"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{label:"Value","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"value"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"备注"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delProjectVariable(e.$index)}}},[t._v("删除\n                            ")])]}}])})],1),a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid rgb(241, 215, 215)"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.projectData.modelFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",id:"sure_btn",size:"small"},nativeOn:{click:function(e){t.addProjectBtn()}}},[t._v("确 定\n            ")])],1)],1)],1)},St=[],$t={name:"projectManage",data(){return{environmentChoice:"first",environment:{environmentTest:[{value:""}],environmentDevelop:[{value:""}],environmentProduction:[{value:""}],environmentStandby:[{value:""}]},tableData:Array(),total:1,funcAddress:"",userData:[],currentPage:1,sizePage:20,form:{projectName:null,user:{user_name:null,user_id:null}},projectData:{host:null,hostTwo:null,hostThree:null,hostFour:null,id:null,modelFormVisible:!1,projectName:null,principal:null,formLabelWidth:"80px",funcFile:"",header:Array(),variable:Array()}}},methods:{proHandleCurrentChange(t){this.currentPage=t,this.findProject()},proHandleSizeChange(t){this.sizePage=t,this.findProject()},findProject(){this.$axios.post(this.$api.findProApi,{projectName:this.form.projectName,page:this.currentPage,sizePage:this.sizePage}).then(t=>{this.messageShow(this,t)&&(this.tableData=t.data["data"],this.total=t.data["total"],this.userData=t.data["userData"])})},findFuncAddress(){this.$axios.post(this.$api.getFuncAddressApi).then(t=>{this.funcAddress=t["data"]["data"]})},initProjectData(){this.projectData.projectName=null,this.environment.environmentTest=Array(),this.environment.environmentDevelop=Array(),this.environment.environmentProduction=Array(),this.environment.environmentStandby=Array(),this.form.user={},this.projectData.principal=null,this.projectData.funcFile=null,this.projectData.header=Array(),this.projectData.variable=Array(),this.projectData.id=null,this.projectData.modelFormVisible=!0},dealHostList(t){let e=Array();for(let a=0;a<t.length;a++)t[a].value&&e.push(t[a].value);return e},dealHostDict(t){let e=Array();if(!t)return e;for(let a=0;a<t.length;a++)e.push({value:t[a]});return e},addProjectBtn(){let t,e=this.environment.environmentTest.length;t="second"===this.environmentChoice?this.environment.environmentDevelop.length:"third"===this.environmentChoice?this.environment.environmentProduction.length:"fourth"===this.environmentChoice?this.environment.environmentStandby.length:e,t!==e?this.$message({showClose:!0,message:"当前所选环境的url数量和测试环境不一致,会影响到接口测试",type:"warning"}):this.addProject()},addProject(){this.$axios.post(this.$api.addProApi,{projectName:this.projectData.projectName,principal:this.projectData.principal,funcFile:this.projectData.funcFile,environmentChoice:this.environmentChoice,host:this.dealHostList(this.environment.environmentTest),hostTwo:this.dealHostList(this.environment.environmentDevelop),hostThree:this.dealHostList(this.environment.environmentProduction),hostFour:this.dealHostList(this.environment.environmentStandby),id:this.projectData.id,header:JSON.stringify(this.projectData.header),userId:this.form.user.user_id,variable:JSON.stringify(this.projectData.variable)}).then(t=>{this.messageShow(this,t)&&(this.projectData.modelFormVisible=!1,this.findProject())})},editProject(t){this.$axios.post(this.$api.editProApi,{id:t}).then(e=>{let a=this.userData.map(t=>t.user_id).indexOf(e.data["data"]["user_id"]);this.form.user=this.userData[a],this.projectData.projectName=e.data["data"]["pro_name"],this.projectData.principal=e.data["data"]["principal"],this.environmentChoice=e.data["data"]["environment_choice"],this.environment.environmentTest=this.dealHostDict(e.data["data"]["host"]),this.environment.environmentDevelop=this.dealHostDict(e.data["data"]["host_two"]),this.environment.environmentProduction=this.dealHostDict(e.data["data"]["host_three"]),this.environment.environmentStandby=this.dealHostDict(e.data["data"]["host_four"]),this.projectData.header=e.data["data"]["headers"],this.projectData.variable=e.data["data"]["variables"],this.projectData.id=t,this.projectData.funcFile=e.data["data"]["func_file"],this.projectData.modelFormVisible=!0})},delProject(t){this.$axios.post(this.$api.delProApi,{id:t}).then(t=>{this.messageShow(this,t),(this.currentPage-1)*this.sizePage+1===this.total&&(this.currentPage=this.currentPage-1),this.findProject()})},addProjectVariable(){this.projectData.variable.push({key:null,value:null,remark:null})},delProjectVariable(t){this.projectData.variable.splice(t,1)},addProjectHeader(){this.projectData.header.push({key:null,value:null})},delProjectHeader(t){this.projectData.header.splice(t,1)},environmentShow(t){return"first"===t?"测试环境":"second"===t?"开发环境":"third"===t?"线上环境":"fourth"===t?"备用环境":void 0},delTableRow(t,e){this.$confirm("删除url会影响到整体排序,接口那边的引用是依据url的顺序来的,请认真考虑一下?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{"test"===t?this.environment.environmentTest.splice(e,1):"develop"===t?this.environment.environmentDevelop.splice(e,1):"production"===t?this.environment.environmentProduction.splice(e,1):"standby"===t&&this.environment.environmentStandby.splice(e,1)}).catch(()=>{})},addTableRow(t){"test"===t?this.environment.environmentTest.push({value:""}):"develop"===t?this.environment.environmentDevelop.push({value:""}):"production"===t?this.environment.environmentProduction.push({value:""}):"standby"===t&&this.environment.environmentStandby.push({value:""})}},computed:{monitorEnvironmentTest(){return this.environment.environmentTest},monitorEnvironmentDevelop(){return this.environment.environmentDevelop},monitorEnvironmentProduction(){return this.environment.environmentProduction},monitorEnvironmentStandby(){return this.environment.environmentStandby}},watch:{monitorEnvironmentTest:{handler:function(){0===this.environment.environmentTest.length&&this.addTableRow("test"),this.environment.environmentTest[this.environment.environmentTest.length-1]["value"]&&this.addTableRow("test")},deep:!0},monitorEnvironmentDevelop:{handler:function(){0===this.environment.environmentDevelop.length&&this.addTableRow("develop"),this.environment.environmentDevelop[this.environment.environmentDevelop.length-1]["value"]&&this.addTableRow("develop")},deep:!0},monitorEnvironmentProduction:{handler:function(){0===this.environment.environmentProduction.length&&this.addTableRow("production"),this.environment.environmentProduction[this.environment.environmentProduction.length-1]["value"]&&this.addTableRow("production")},deep:!0},monitorEnvironmentStandby:{handler:function(){0===this.environment.environmentStandby.length&&this.addTableRow("standby"),this.environment.environmentStandby[this.environment.environmentStandby.length-1]["value"]&&this.addTableRow("standby")},deep:!0}},mounted(){this.findProject(),this.findFuncAddress()}},At=$t,Mt=Object(d["a"])(At,Ct,St,!1,null,null,null);Mt.options.__file="project.vue";var jt=Mt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportManage"},[a("el-form",{staticClass:"demo-form-inline search-style",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"项目",labelWidth:"110px"}},[a("el-select",{attrs:{placeholder:"请选择项目"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}},t._l(t.proData,function(t){return a("el-option",{key:t.id,attrs:{value:t.name}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.handleCurrentChange(1)}}},[t._v("搜索")])],1)],1),a("el-tabs",{staticClass:"table_padding",attrs:{value:"first"}},[a("el-tab-pane",{staticStyle:{margin:"0 0 -10px"},attrs:{label:"报告列表",name:"first"}},[a("el-table",{attrs:{data:t.tableData,"max-height":"748",stripe:""}},[a("el-table-column",{attrs:{prop:"project_name",label:"所属项目",minWidth:"50"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,minWidth:"200",prop:"name",label:"用例"}}),a("el-table-column",{attrs:{prop:"create_time",label:"时间",minWidth:"100"}}),a("el-table-column",{attrs:{prop:"performer",label:"执行者",minWidth:"100"}}),a("el-table-column",{attrs:{prop:"read_status",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:"已读"===e.row.read_status?"success":"danger"}},[t._v("\n                            "+t._s(e.row.read_status)+"\n                        ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-zoom-in",size:"mini"},nativeOn:{click:function(a){t.check(t.tableData[e.$index]["id"])}}},[t._v("查看\n                        ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"mini"},nativeOn:{click:function(a){t.downReport(t.tableData[e.$index]["id"])}}},[t._v("下载\n                        ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.sureView(t.delReport,t.tableData[e.$index]["id"],"该报告")}}},[t._v("删除\n                        ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.sizePage,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)],1)],1)},Nt=[],Pt={name:"reportManage",data(){return{proData:"",tableData:[],total:1,currentPage:1,sizePage:20,form:{projectName:"",gathers:[],scenes:[]},reportData:{data:{records:[]},body:{platform:{duration:"",python_version:""},stat:{skipped:"",testsRun:"",successes:"",failures:"",errors:""}}}}},methods:{handleCurrentChange(t){this.currentPage=t,this.findReport()},handleSizeChange(t){this.sizePage=t,this.findReport()},initData(){this.$axios.get(this.$api.baseDataApi).then(t=>{t.data["user_pro"]&&(this.form.projectName=t.data["user_pro"]["pro_name"],this.findReport()),this.proData=t.data["pro_and_id"]})},findReport(){this.$axios.post(this.$api.findReportApi,{page:this.currentPage,projectName:this.form.projectName,sizePage:this.sizePage}).then(t=>{this.messageShow(this,t)&&(this.tableData=t.data["data"],this.total=t.data["total"])})},delReport(t){this.$axios.post(this.$api.delReportApi,{report_id:t}).then(t=>{this.messageShow(this,t),(this.currentPage-1)*this.sizePage+1===this.total&&(this.currentPage=this.currentPage-1),this.findReport()})},check(t){let{href:e}=this.$router.resolve({path:"reportShow",query:{reportId:t}});window.open(e,"_blank")},downReport(t){this.$axios.post("/api/report/download",{reportId:t}).then(t=>{this.download(t.data["data"],"测试报告.html","text/html")})},download(t,e,a){let s,i,n=window,l="application/octet-stream",o=a||l,r=t,c=document.createElement("a"),d=function(t){return String(t)},p=n.Blob||n.MozBlob||n.WebKitBlob||d,u=e||"download";function m(t,e){if("download"in c)return c.href=t,c.setAttribute("download",u),c.className="download-js-link",c.innerHTML="downloading...",c.style.display="none",document.body.appendChild(c),setTimeout(function(){c.click(),document.body.removeChild(c),!0===e&&setTimeout(function(){n.URL.revokeObjectURL(c.href)},250)},66),!0}if(p=p.call?p.bind(n):Blob,s=r instanceof p?r:new p([r],{type:o}),n.URL)m(n.URL.createObjectURL(s),!0);else{if("string"===typeof s||s.constructor===d)try{return m("data:"+o+";base64,"+n.btoa(s))}catch(h){return m("data:"+o+","+encodeURIComponent(s))}i=new FileReader,i.onload=function(){m(this.result)},i.readAsDataURL(s)}return!0}},mounted(){this.initData()}},Tt=Pt,Ft=(a("becf"),Object(d["a"])(Tt,zt,Nt,!1,null,null,null));Ft.options.__file="report.vue";var Ot=Ft.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportShow",staticStyle:{"line-height":"36px","font-family":"LiSu"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content",staticStyle:{"background-color":"#f5f5f5 !important"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{padding:"4px 10px"},attrs:{type:"primary",round:""}},[t._v(t._s(null))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:this.picStatus,expression:"this.picStatus"}],staticStyle:{"margin-top":"5px",padding:"4px 10px"},attrs:{type:"primary",size:"mini",round:""},nativeOn:{click:function(e){t.hideShowPic(!1)}}},[t._v("隐藏图表\n                ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!this.picStatus,expression:"!this.picStatus"}],staticStyle:{padding:"4px 10px"},attrs:{type:"primary",size:"mini",round:""},nativeOn:{click:function(e){t.hideShowPic(!0)}}},[t._v("展示图表\n                ")]),a("el-dropdown",{staticStyle:{"line-height":"15px","margin-left":"10px",color:"#3a8ee6"},on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                        业务展示"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"None"}},[t._v("全部业务")]),a("el-dropdown-item",{attrs:{command:"success"}},[t._v("成功业务")]),a("el-dropdown-item",{attrs:{command:"error"}},[t._v("失败业务")])],1)],1),a("span",{staticStyle:{"font-family":"Source Sans Pro",float:"right","font-size":"13px",color:"#3a8ee6","margin-right":"40px"}},[t._v("time: "+t._s(this.reportData.time.start_datetime))])],1)])],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.picStatus,expression:"this.picStatus"}]},[a("el-col",{staticStyle:{"border-style":"solid","border-color":"#ffffff rgb(234, 234, 234) #ffffff #ffffff","border-width":"1px"},attrs:{span:10}},[a("div",{staticStyle:{height:"200px",float:"left"}},[a("ve-pie",{attrs:{data:t.caseChartData,settings:t.caseChartSettings,height:"200px",width:"350px"}})],1),a("ol",{staticClass:"remote-line",staticStyle:{"margin-top":"5px","font-size":"14px","line-height":"25px"}},[a("li",{staticStyle:{"font-weight":"700","font-size":"16px"}},[t._v("apis result")]),a("li",{staticStyle:{"font-weight":"600",color:"rgb(146, 123, 139)"}},[t._v("总数:"+t._s(this.reportData.stat.teststeps.total)+"\n                ")]),a("li",{staticStyle:{color:"rgb(25,212,174)","font-weight":"600"}},[t._v("成功:"+t._s(this.reportData.stat.teststeps.successes)+"\n                ")]),a("li",{staticStyle:{color:"rgb(250,110,134)","font-weight":"600"}},[t._v("失败:"+t._s(this.reportData.stat.teststeps.failures)+"\n                ")]),a("li",{staticStyle:{color:"#E87C25","font-weight":"600"}},[t._v("错误:"+t._s(this.reportData.stat.teststeps.errors))])])]),a("el-col",{staticStyle:{"border-width":"1px"},attrs:{span:14}},[a("div",{staticStyle:{height:"200px",float:"left"}},[a("ve-ring",{attrs:{data:t.suiteChartData,settings:t.suiteChartSettings,height:"200px",width:"350px"}})],1),a("ol",{staticClass:"remote-line",staticStyle:{"margin-top":"5px","font-size":"14px","line-height":"25px"}},[a("li",{staticStyle:{"font-weight":"700","font-size":"16px"}},[t._v("cases result")]),a("li",{staticStyle:{"font-weight":"600",color:"rgb(146, 123, 139)"}},[t._v("总数:"+t._s(this.reportData.stat.testcases.total)+"\n                ")]),a("li",{staticStyle:{color:"rgb(25,212,174)","font-weight":"600"}},[t._v("成功:"+t._s(this.reportData.stat.testcases.success)+"\n                ")]),a("li",{staticStyle:{color:"rgb(250,110,134)","font-weight":"600"}},[t._v("失败:"+t._s(this.reportData.stat.testcases.fail))])])])],1),a("el-row",[a("el-col",{staticStyle:{"border-style":"solid","border-color":"rgb(234, 234, 234) #ffffff #ffffff #ffffff","border-width":"1px"},attrs:{span:6}},[a("el-scrollbar",[a("div",{style:{height:t.picHeight}},[a("el-collapse",{attrs:{accordion:""}},t._l(t.reportData["details"],function(e,s){return a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.success?t.showScene[0]:t.showScene[1],expression:"item.success === true ? showScene[0]: showScene[1]"}],key:s},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-weight":"600","font-size":"15px","margin-left":"10px"},style:!0===e.success?"color:#409eff":"color:rgb(255, 74, 74)"},[t._v("\n                                    "+t._s(e.name)+"\n                                ")])]),a("div",[a("ol",{staticStyle:{padding:"5px","font-family":"Times New Roman"},attrs:{id:"test"}},t._l(e["records"],function(e,i){return a("li",{key:i,class:{active:s===t.showColor[0]&&i===t.showColor[1],wire:0===i},staticStyle:{"list-style-type":"none","border-bottom":"1px solid #eee","margin-left":"10px"},on:{click:function(e){t.handleNodeClick(s,i)}}},[a("div",{style:"success"===e.status?"color:#67c23a":"color:rgb(255, 74, 74)"},[a("span",{staticClass:"test-name"},[t._v(t._s(e.name))]),a("span",{staticClass:"test-time"},[t._v(t._s(e.meta_datas.stat.response_time_ms)+" ms")]),a("span",{staticClass:"test-status right pass"},[t._v(t._s(e.status))])])])}),0)])],2)}),1)],1)])],1),a("el-col",{staticStyle:{"border-style":"solid","border-color":"rgb(234, 234, 234) #ffffff rgb(234, 234, 234) rgb(234, 234, 234)","border-width":"1px","font-family":"Serif"},attrs:{span:18}},[a("el-scrollbar",{attrs:{wrapStyle:{height:t.picHeight}}},[a("div",{staticStyle:{float:"right","padding-right":"15px",position:"absolute","z-index":"100",right:"1px",top:"-2px"}},[a("el-tooltip",{attrs:{content:"查看主要信息",placement:"top-start"},nativeOn:{click:function(e){t.showInfo()}}},[a("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-info",circle:""}})],1),a("el-tooltip",{attrs:{content:"查看所有信息",placement:"top-start"}},[a("el-button",{attrs:{size:"mini",type:"primary",circle:""},nativeOn:{click:function(e){t.showAll()}}},[t._v("all")])],1),a("el-tooltip",{attrs:{content:"查看报错信息",placement:"top-start"}},[a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-error",circle:""},nativeOn:{click:function(e){t.showError()}}})],1)],1),a("div",{style:{height:t.picHeight}},[a("table",{staticStyle:{padding:"10px","font-size":"14px","line-height":"25px",width:"100%",position:"relative"},attrs:{border:"0",cellpadding:"0",cellspacing:"0"}},[a("thead",[a("tr",[a("th",{staticStyle:{"border-bottom":"1px solid #d0d0d0",width:"100px"}},[t._v("Identity")]),a("th",{staticStyle:{"border-bottom":"1px solid #d0d0d0",width:"90%"}},[t._v("Details")])])]),a("tbody",[a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[0],expression:"statusShow[0]"}]},[a("td",{staticClass:"my-table"},[t._v("url")]),a("td",{staticClass:"content",staticStyle:{overflow:"auto"}},[t._v("\n                                "+t._s(this.meta_datas.data[0].request.url)+"\n                            ")])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[1],expression:"statusShow[1]"}]},[a("td",{staticClass:"my-table"},[t._v("method")]),a("td",{staticClass:"content"},[t._v("\n                                "+t._s(this.meta_datas.data[0].request.method)+"\n                            ")])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[2],expression:"statusShow[2]"}]},[a("td",{staticClass:"my-table"},[t._v("status_code")]),a("td",{staticClass:"content"},[t._v("\n                                "+t._s(this.meta_datas.data[0].response.status_code)+"\n                            ")])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[3],expression:"statusShow[3]"}]},[a("td",{staticClass:"my-table"},[t._v("req_headers")]),a("td",{staticClass:"content"},[a("pre",{staticStyle:{overflow:"auto"}},[t._v(t._s(t.optimizeShow(this.meta_datas.data[0].request.headers)))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[4],expression:"statusShow[4]"}]},[a("td",{staticClass:"my-table"},[t._v("json")]),a("td",{staticClass:"content"},[a("pre",{staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word"}},[t._v(t._s(this.meta_datas.data[0].request.json))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[5],expression:"statusShow[5]"}]},[a("td",{staticClass:"my-table"},[t._v("data")]),a("td",{staticClass:"content"},[a("pre",{staticStyle:{overflow:"auto"}},[t._v(t._s(t.optimizeShow(this.meta_datas.data[0].request.data)))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[6],expression:"statusShow[6]"}]},[a("td",{staticClass:"my-table"},[t._v("params")]),a("td",{staticClass:"content"},[a("pre",[t._v(t._s(t.optimizeShow(this.meta_datas.data[0].request.params)))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[7],expression:"statusShow[7]"}]},[a("td",{staticClass:"my-table"},[t._v("resp_headers")]),a("td",{staticClass:"content"},[a("pre",{staticStyle:{overflow:"auto"}},[t._v(t._s(t.optimizeShow(this.meta_datas.data[0].response.headers)))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[8],expression:"statusShow[8]"}]},[a("td",{staticClass:"my-table"},[t._v("resp_data")]),a("td",{staticClass:"content"},[a("pre",{staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word"}},[t._v(t._s(this.meta_datas.data[0].response.json))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.statusShow[8],expression:"statusShow[8]"}]},[a("td",{staticClass:"my-table"},[t._v("resp_text")]),a("td",{staticClass:"content"},[a("pre",{staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word"}},[t._v(t._s(this.meta_datas.data[0].response.text))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:""!==t.attachment,expression:"attachment !== ''"}]},[a("td",{staticClass:"my-table"},[t._v("attachment")]),a("td",{staticClass:"content"},[a("pre",{staticStyle:{overflow:"auto",color:"red"}},[t._v(t._s(this.attachment))])])])])])])])],1)],1)],1)},Et=[],Lt={name:"reportShow",data(){return this.caseChartSettings={radius:80,avoidLabelOverlap:!1,offsetY:110,itemStyle:{normal:{color:function(t){let e=["rgb(25,212,174)","rgb(250,110,134)","#FE8463","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];return e[t.dataIndex]}}},label:{normal:{position:"center",show:!1}},labelLine:{normal:{show:!1}}},this.suiteChartSettings={radius:[50,80],avoidLabelOverlap:!1,offsetY:110,itemStyle:{normal:{color:function(t){let e=["rgb(25,212,174)","rgb(250,110,134)","#fb2828","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];return e[t.dataIndex]}}},label:{normal:{position:"center",show:!1}},labelLine:{normal:{show:!1}}},{reportAddress:"",picHeight:"635px",picStatus:!0,active:!0,showScene:[!0,!0],statusShow:[!0,!0,!0,!0,!0,!0,!0,!0,!0],showColor:[],attachment:"",meta_datas:{data:[{request:{body:null,url:null,headers:null,data:null,params:null,json:null},response:{content:null,json:null,status_code:null}}]},caseChartData:{columns:["caseName","num"],rows:[{caseName:"成功api",num:0},{caseName:"失败api",num:0},{caseName:"错误api",num:0}]},suiteChartData:{columns:["name","num"],rows:[{name:"成功case",num:0},{name:"失败case",num:0}]},reportData:{details:[{name:""}],platform:{duration:"",python_version:""},stat:{teststeps:{errors:"",expectedFailures:"",failures:"",skipped:"",successes:"",total:"",unexpectedSuccesses:""},testcases:{fail:"",success:"",total:""}},time:{start_at:"",duration:1,start_datetime:""}}}},methods:{handleNodeClick(t,e){this.showColor=[t,e],this.meta_datas=this.reportData["details"][t]["records"][e]["meta_datas"],this.attachment=this.reportData["details"][t]["records"][e]["attachment"]},handleCommand(t){this.showScene="error"===t?[!1,!0]:"success"===t?[!0,!1]:[!0,!0]},optimizeShow(t){if(t){let e="";for(let a in t)e=e+a+":"+t[a]+"\n";return e}},showInfo(){this.statusShow=[!0,!0,!0,!1,!1,!1,!1,!1,!0]},showAll(){this.statusShow=[!0,!0,!0,!0,!0,!0,!0,!0,!0]},showError(){this.statusShow=[!1,!1,!1,!1,!1,!1,!1,!1,!1]},showData(t="None"){this.reportAddress=this.$route.query.reportId,this.$axios.post("/api/report/list",{reportId:this.reportAddress,state:t}).then(t=>{this.messageShow(this,t)&&(this.reportData=t["data"],this.meta_datas=this.reportData["details"][0]["records"][0]["meta_datas"],this.attachment=this.reportData["details"][0]["records"][0]["attachment"],this.caseChartData["rows"][0]["num"]=this.reportData.stat.teststeps.successes,this.caseChartData["rows"][1]["num"]=this.reportData.stat.teststeps.failures,this.caseChartData["rows"][2]["num"]=this.reportData.stat.teststeps.errors,this.suiteChartData["rows"][0]["num"]=this.reportData.stat.testcases.success,this.suiteChartData["rows"][1]["num"]=this.reportData.stat.testcases.fail)})},hideShowPic(t){t?(this.picStatus=!0,this.picHeight="635px"):(this.picStatus=!1,this.picHeight="835px")}},mounted(){this.showData()}},It=Lt,Wt=(a("c4a8"),Object(d["a"])(It,Vt,Et,!1,null,"cef59538",null));Wt.options.__file="reportShow.vue";var Rt=Wt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportHeader2",staticStyle:{margin:"0 -20px 0 -20px"}},[a("el-container",[a("el-container",[a("el-header",{staticStyle:{height:"40px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:20}},[a("div",{staticStyle:{"font-size":"22px","font-family":"KaiTi",color:"#ffffff","margin-top":"-15px"}},[t._v("Test Report: 测试报告\n                        ")])])],1)],1)],1)],1)],1)},Ut=[],qt={name:"reportHeader2",data(){return{}},methods:{},mounted(){}},Bt=qt,Jt=(a("cb01"),Object(d["a"])(Bt,Ht,Ut,!1,null,"92b30c0c",null));Jt.options.__file="reportHeader.vue";var Kt=Jt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"buildInFunc"},[a("el-form",{staticClass:"demo-form-inline search-style",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"函数文件",labelWidth:"80px"}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{"margin-right":"2px"},attrs:{"fetch-suggestions":t.querySearch,placeholder:"输入或选择文件",size:"small"},model:{value:t.comparator,callback:function(e){t.comparator=e},expression:"comparator"}}),a("el-button-group",[a("el-button",{attrs:{type:"success",size:"small"},nativeOn:{click:function(e){t.findFunc()}}},[t._v("读取")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.createFunc()}}},[t._v("创建")])],1)],1),a("el-form-item",{attrs:{label:"函数名",labelWidth:"80px"}},[a("el-input",{attrs:{placeholder:"输入格式：${func(abc,123)}",size:"small"},model:{value:t.funcName,callback:function(e){t.funcName=e},expression:"funcName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.checkFunc()}}},[t._v("调试")])],1),a("el-form-item",[a("el-button-group",[a("el-tooltip",{attrs:{content:"重置文档",placement:"top-start"}},[a("el-button",{attrs:{type:"info",icon:"el-icon-refresh",size:"small"},nativeOn:{click:function(e){t.findFunc()}}})],1),a("el-tooltip",{attrs:{content:"保存文档",placement:"top-start"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-document",size:"small"},nativeOn:{click:function(e){t.saveFunc()}}})],1)],1)],1)],1),a("el-row",[a("el-col",{staticStyle:{border:"3px solid rgb(189, 189, 189)"},attrs:{span:16}},[a("el-container",[a("editor",{staticStyle:{"font-size":"15px"},attrs:{lang:"python",theme:"monokai",width:"100%",height:"810px",options:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}},on:{init:t.editorInit},model:{value:t.funcData,callback:function(e){t.funcData=e},expression:"funcData"}})],1)],1),a("el-col",{staticStyle:{"padding-left":"10px","background-color":"rgb(234, 234, 234)",height:"815px"},attrs:{span:8}},[a("div",{staticStyle:{"font-weight":"700",color:"gray","font-size":"14px","margin-top":"2px"}},[t._v("\n                测试结果：\n            ")]),a("pre",{staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word","padding-left":"10px"}},[t._v(t._s(this.result)+"\n            ")])])],1)],1)},Yt=[],Qt={components:{editor:a("7c9e")},name:"buildInFunc",data(){return{funcName:"",funcData:"",comparator:"",comparators:[],result:""}},methods:{querySearch(t,e){e(this.comparators)},findFunc(){this.$axios.post(this.$api.findFuncApi,{funcName:this.comparator}).then(t=>{this.messageShow(this,t),this.funcData=t["data"]["func_data"]})},createFunc(){this.$axios.post(this.$api.createFuncApi,{funcName:this.comparator}).then(t=>{this.messageShow(this,t)&&this.getFuncAddress()})},removeFunc(){this.$axios.post("/apiMessage/apiMessage/func/remove",{funcName:this.comparator}).then(t=>{this.comparator="",this.messageShow(this,t),this.getFuncAddress()})},getFuncAddress(){this.$axios.post(this.$api.getFuncAddressApi).then(t=>{this.comparators=t["data"]["data"]})},checkFunc(){this.comparator?this.funcName?this.funcData?this.$axios.post(this.$api.saveFuncApi,{funcData:this.funcData,funcName:this.comparator}).then(()=>{this.$axios.post(this.$api.checkFuncApi,{funcFileName:this.comparator,funcName:this.funcName}).then(t=>{this.messageShow(this,t),this.result=t["data"]["result"]})}):this.$message({showClose:!0,message:"请点击文件读取后再调试",type:"warning"}):this.$message({showClose:!0,message:"函数名不能为空",type:"warning"}):this.$message({showClose:!0,message:"请先选择函数文件",type:"warning"})},editorInit(){a("2099"),a("8882"),a("14d4"),a("8ef6")},saveFunc(){this.funcData?this.$axios.post(this.$api.saveFuncApi,{funcData:this.funcData,funcName:this.comparator}).then(t=>{this.messageShow(this,t)}):this.$message({showClose:!0,message:"文件为空，请输入内容后再保存",type:"warning"})}},mounted(){this.getFuncAddress()}},Xt=Qt,Zt=Object(d["a"])(Xt,Gt,Yt,!1,null,null,null);Zt.options.__file="buildInFunc.vue";var te=Zt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"this.loading"}],staticClass:"sceneManage"},[a("el-form",{staticClass:"demo-form-inline search-style",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"项目名称",labelWidth:"110px"}},[a("el-select",{attrs:{placeholder:"请选择项目"},on:{change:t.initProjectChoice},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}},t._l(t.proAndIdData,function(t){return a("el-option",{key:t.name,attrs:{value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"用例名称"}},[a("el-input",{attrs:{placeholder:"请输入用例"},model:{value:t.form.caseName,callback:function(e){t.$set(t.form,"caseName",e)},expression:"form.caseName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(e){t.handleCaseCurrentChange(1)}}},[t._v("搜索\n                ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.addCase()}}},[t._v("添加接口用例")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.runScene(t.caseList,!0,!0)}}},[t._v("批量运行")])],1)],1),a("el-tabs",{staticStyle:{"padding-left":"10px","padding-right":"5px"},on:{"tab-click":t.tabChange},model:{value:t.tabValue,callback:function(e){t.tabValue=e},expression:"tabValue"}},[a("el-tab-pane",{attrs:{label:"用例信息",name:"first"}},[a("el-row",[a("el-col",{staticStyle:{border:"1px solid","border-color":"#ffffff rgb(234, 234, 234) #ffffff #ffffff"},attrs:{span:3}},[a("el-row",[a("el-col",{staticStyle:{border:"1px solid","border-color":"#ffffff #ffffff rgb(234, 234, 234) #ffffff",padding:"2px"}},[a("el-dropdown",{staticStyle:{float:"right"},on:{command:t.dropdownSetEvent}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#4ae2d5"}},[t._v("\n                                        操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"add"}},[t._v("添加")]),a("el-dropdown-item",{attrs:{command:"edit"}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:"stick"}},[t._v("置顶")]),a("el-dropdown-item",{attrs:{command:"del"}},[t._v("删除")])],1)],1)],1)],1),a("el-row",[a("el-scrollbar",{attrs:{wrapStyle:"height:740px;"}},[a("el-tree",{ref:"testTree",staticClass:"filter-tree",attrs:{"highlight-current":"","node-key":"id",data:t.setDataList,props:t.defaultProps},on:{"node-click":t.handleNodeClick}})],1),a("el-pagination",{attrs:{small:"","current-page":t.setPage.currentPage,"page-size":30,layout:"prev, pager, next",total:t.setPage.total},on:{"current-change":t.handleSetCurrentChange}})],1)],1),a("el-col",{attrs:{span:21}},[a("el-table",{ref:"sceneMultipleTable",attrs:{data:t.caseAll,"max-height":"748",stripe:""},on:{"selection-change":t.handleCaseSelection}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),a("el-table-column",{attrs:{prop:"num",label:"编号","min-width":"10"}}),a("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"50"}}),a("el-table-column",{attrs:{prop:"desc",label:"描述","min-width":"50"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},nativeOn:{click:function(a){t.editCase(t.caseAll[e.$index]["sceneId"])}}},[t._v("\n                                        编辑\n                                    ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-tickets",size:"mini"},nativeOn:{click:function(a){t.$refs.caseEditFunc.editCase(t.caseAll[e.$index]["sceneId"],!0)}}},[t._v("\n                                        复制\n                                    ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-setting",size:"mini"},nativeOn:{click:function(a){t.runScene(t.caseAll[e.$index]["sceneId"])}}},[t._v("运行\n                                    ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.sureView(t.delCase,t.caseAll[e.$index]["sceneId"],t.caseAll[e.$index]["name"])}}},[t._v("\n                                        删除\n                                    ")])]}}])})],1),a("el-button",{staticStyle:{position:"absolute","margin-top":"2px"},attrs:{size:"mini"},on:{click:function(e){t.cancelSelection()}}},[t._v("取消选择\n                        ")]),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.casePage.currentPage,"page-size":t.casePage.sizePage,layout:"total, sizes, prev, pager, next, jumper",total:this.casePage.total},on:{"current-change":t.handleCaseCurrentChange,"size-change":t.handleCaseSizeChange}})],1)],1)],1)],1),t.tabEditShow?a("el-tab-pane",{attrs:{label:"用例编辑",name:"second"}},[a("div",{staticStyle:{"margin-top":"5px"}}),a("caseEdit",{ref:"caseEditFunc",attrs:{allSetList:t.allSetList,proModelData:t.proModelData,projectName:t.form.projectName,setTempData:t.setTempData,configData:t.configData,funcAddress:t.funcAddress}})],1):t._e()],1),a("setEdit",{ref:"setEditFunc",attrs:{projectName:t.form.projectName,setTempData:t.setTempData}}),a("errorView",{ref:"errorViewFunc"}),a("result",{ref:"resultFunc"})],1)},ae=[],se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setEdit"},[a("el-dialog",{attrs:{title:"用例集配置",visible:t.setData.viewStatus,width:"30%"},on:{"update:visible":function(e){t.$set(t.setData,"viewStatus",e)}}},[a("el-form",[a("el-form-item",{attrs:{label:"用例集名称","label-width":"100px"}},[a("el-input",{model:{value:t.setData.name,callback:function(e){t.$set(t.setData,"name",e)},expression:"setData.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.setData.viewStatus=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.addSet()}}},[t._v("确 定")])],1)],1)],1)},ie=[],ne={name:"setEdit",props:["projectName","setTempData"],data(){return{setData:{viewStatus:!1,id:"",num:"",name:""}}},methods:{addSet(){this.$axios.post(this.$api.addCaseSetApi,{projectName:this.projectName,name:this.setData.name,id:this.setData.id,num:this.setData.num}).then(t=>{this.messageShow(this,t)&&(this.$parent.findSet(),this.setData.viewStatus=!1)})},initSet(){this.setData.viewStatus=!0,this.setData.name="",this.setData.id=""},editSet(){this.setData.name=this.setTempData.name,this.setData.id=this.setTempData.setId,this.setData.viewStatus=!0},stickSet(t){this.$axios.post(this.$api.stickCaseSetApi,{id:t,projectName:this.projectName}).then(t=>{this.messageShow(this,t),this.$parent.findSet()})}},mounted(){}},le=ne,oe=Object(d["a"])(le,se,ie,!1,null,null,null);oe.options.__file="setEdit.vue";var re=oe.exports,ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sceneEdit"},[a("el-tabs",{attrs:{value:"first",type:"border-card"},on:{"tab-click":t.changeShow}},[a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"用例信息",name:"first"}},[a("el-form",{attrs:{size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"用例名称","label-width":t.caseData.formLabelWidth}},[a("el-input",{staticStyle:{width:"150px"},model:{value:t.caseData.name,callback:function(e){t.$set(t.caseData,"name",e)},expression:"caseData.name"}})],1),a("el-form-item",{attrs:{label:"项目选择","label-width":t.caseData.formLabelWidth}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择项目"},on:{change:t.changeSetChoice},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}},t._l(t.proModelData,function(t,e){return a("el-option",{key:e,attrs:{value:e}})}),1)],1),t.caseData.id?a("el-form-item",{attrs:{label:"用例编号","label-width":t.caseData.formLabelWidth}},[a("el-input",{staticStyle:{width:"130px"},attrs:{minlength:215},model:{value:t.caseData.num,callback:function(e){t.$set(t.caseData,"num",t._n(e))},expression:"caseData.num"}})],1):t._e()],1),a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"用例描述","label-width":t.caseData.formLabelWidth}},[a("el-input",{staticStyle:{width:"150px"},model:{value:t.caseData.desc,callback:function(e){t.$set(t.caseData,"desc",e)},expression:"caseData.desc"}})],1),a("el-form-item",{attrs:{label:"集合选择","label-width":t.caseData.formLabelWidth}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择用例集","value-key":"id"},model:{value:t.form.set,callback:function(e){t.$set(t.form,"set",e)},expression:"form.set"}},t._l(t.allSetList[t.form.projectName],function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t}})}),1)],1),a("el-form-item",{attrs:{label:"执行次数","label-width":"70px"}},[a("el-input-number",{attrs:{min:1,max:1e3},model:{value:t.caseData.times,callback:function(e){t.$set(t.caseData,"times",e)},expression:"caseData.times"}})],1)],1),a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid rgb(241, 215, 215)","margin-top":"-5px"}}),a("el-form",{staticClass:"demo-form-inline ",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:" ",labelWidth:"10px"}},[a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{clearable:"","value-key":"configId",placeholder:"默认项目环境"},model:{value:t.caseData.environment,callback:function(e){t.$set(t.caseData,"environment",e)},expression:"caseData.environment"}},t._l(t.environmentList,function(t){return a("el-option",{key:t,attrs:{value:t}})}),1),a("el-select",{attrs:{multiple:"",placeholder:"请选择导入函数文件",size:"small"},model:{value:t.caseData.funcAddress,callback:function(e){t.$set(t.caseData,"funcAddress",e)},expression:"caseData.funcAddress"}},t._l(this.funcAddress,function(t){return a("el-option",{key:t["value"],attrs:{label:t["value"],value:t["value"]}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.configShow=!0}}},[t._v("加载配置\n                    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addConfigVariable()}}},[t._v("添加变量\n                    ")])],1)],1),a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid rgb(241, 215, 215)","margin-top":"-5px"}}),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.caseData.variable,"show-header":!1,size:"mini","max-height":"538",stripe:""}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small",placeholder:"key"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small",placeholder:"Value"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small",placeholder:"备注"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{type:"info",icon:"my-icon-jiantou-xiangshang",size:"mini"},nativeOn:{click:function(a){t.upNum(e.$index)}}},[t._v(t._s(null)+"\n                            ")]),a("el-button",{attrs:{type:"info",icon:"my-icon-jiantou-xiangxia",size:"mini"},nativeOn:{click:function(a){t.downNum(e.$index)}}},[t._v(t._s(null)+"\n                            ")]),a("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){t.delConfigVariable(e.$index)}}},[t._v(" 删除\n                            ")])],1)]}}])})],1),a("div",{staticStyle:{"margin-top":"10px",float:"right"}},[a("el-button",{attrs:{type:"success",size:"small"},nativeOn:{click:function(e){t.addCase(!1)}}},[t._v("保 存")])],1)],1),a("el-tab-pane",{staticStyle:{"font-size":"14px"},attrs:{label:"执行步骤",name:"second"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:t.stepSpan}},[a("el-row",{staticStyle:{"margin-top":"10px",color:"rgb(171, 139, 149)","font-weight":"500","font-size":"14px",width:"100%","border-style":"solid","border-width":"1px","border-color":"#ffffff #ffffff rgb(234, 234, 234) #ffffff"},attrs:{gutter:24}},[a("el-col",{staticStyle:{"padding-left":"20px"},attrs:{span:3}},[t._v("\n                            状态\n                        ")]),a("el-col",{attrs:{span:5}},[t._v("\n                            步骤名称\n                        ")]),a("el-col",{attrs:{span:4}},[t._v("\n                            接口名称\n                        ")]),a("el-col",{attrs:{span:4}},[t._v("\n                            次数\n                        ")]),a("el-col",{staticStyle:{"padding-left":"50px"},attrs:{span:6}},[t._v("\n                            操作\n                        ")]),a("el-col",{attrs:{span:2}},[a("div",{staticStyle:{color:"#55a9ff"},on:{click:function(e){return e.preventDefault(),t.showApiData(e)}}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!t.showApiDataStatus,expression:"!showApiDataStatus"}],staticClass:"my-icon-xiangzuo-copy"}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.showApiDataStatus,expression:"showApiDataStatus"}],staticClass:"my-icon-xiangyou"})])])],1),a("draggable",{staticStyle:{width:"99%","min-height":"10px"},attrs:{options:{group:"apiData",animation:300}},model:{value:t.caseData.apiCases,callback:function(e){t.$set(t.caseData,"apiCases",e)},expression:"caseData.apiCases"}},t._l(t.caseData.apiCases,function(e,s){return a("div",{key:s,staticClass:"list-complete-item"},[a("el-row",{attrs:{gutter:21}},[a("el-col",{staticStyle:{"padding-top":"3px"},attrs:{span:2}},[a("el-switch",{model:{value:t.caseData.apiCases[s]["status"],callback:function(e){t.$set(t.caseData.apiCases[s],"status",e)},expression:"caseData.apiCases[index]['status']"}})],1),a("el-col",{staticStyle:{"padding-top":"3px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"center"},attrs:{span:5}},[t._v("\n                                    "+t._s(e.case_name)+"\n                                ")]),a("el-col",{staticStyle:{"padding-top":"3px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"center"},attrs:{span:4}},[t._v("\n                                    "+t._s(e.name)+"\n                                ")]),a("el-col",{attrs:{span:4}},[a("el-input-number",{attrs:{size:"mini",precision:0,min:1,max:1e3},model:{value:t.caseData.apiCases[s]["time"],callback:function(e){t.$set(t.caseData.apiCases[s],"time",e)},expression:"caseData.apiCases[index]['time']"}})],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticStyle:{"padding-left":"50px","padding-top":"3px"},attrs:{span:8}},[a("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(e){t.delApiCase(s)}}},[t._v("删除\n                                    ")]),a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(e){t.apiMessageEditFuncInit(s)}}},[t._v("\n                                        配置\n                                    ")])],1)],1)],1)}),0)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.showApiDataStatus,expression:"!showApiDataStatus"}],attrs:{span:12}},[a("el-tabs",{model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:"添加步骤",name:"first"}},[a("el-form",{staticStyle:{"padding-top":"10px"},attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:" ",labelWidth:"10px"}},[a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{placeholder:"请选择项目"},on:{change:function(e){t.changeModuleChoice()}},model:{value:t.form.apiMesProjectName,callback:function(e){t.$set(t.form,"apiMesProjectName",e)},expression:"form.apiMesProjectName"}},t._l(t.proModelData,function(t,e){return a("el-option",{key:e,attrs:{value:e}})}),1),a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{"value-key":"moduleId",placeholder:"请选择模块"},model:{value:t.form.module,callback:function(e){t.$set(t.form,"module",e)},expression:"form.module"}},t._l(t.proModelData[this.form.apiMesProjectName],function(t){return a("el-option",{key:t.moduleId,attrs:{label:t.name,value:t}})}),1)],1),a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入用例"},model:{value:t.form.apiName,callback:function(e){t.$set(t.form,"apiName",e)},expression:"form.apiName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(e){t.handleCurrentCase(1)}}},[t._v("\n                                        搜索接口\n                                    ")]),a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(e){t.addApiData()}}},[t._v("添加\n                                    ")])],1)],1),a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid rgb(241, 215, 215)","margin-top":"-5px"}}),a("el-row",{staticStyle:{"margin-top":"10px",color:"rgb(171, 139, 149)","font-weight":"500","font-size":"14px","padding-left":"5px","padding-top":"3px"},attrs:{gutter:18}},[a("el-col",{attrs:{span:1}},[t._v("\n                                     \n                                ")]),a("el-col",{attrs:{span:2}},[t._v("\n                                    编号\n                                ")]),a("el-col",{attrs:{span:4}},[t._v("\n                                    用例名称\n                                ")]),a("el-col",{attrs:{span:4}},[t._v("\n                                    用例描述\n                                ")]),a("el-col",{attrs:{span:8}},[t._v("\n                                    接口地址\n                                ")])],1),a("draggable",{attrs:{options:this.draggableOptions},model:{value:t.ApiMsgData,callback:function(e){t.ApiMsgData=e},expression:"ApiMsgData"}},[a("transition-group",{attrs:{name:"list-complete"}},t._l(t.ApiMsgData,function(e,s){return a("div",{key:e.num,staticClass:"list-complete-item"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:1}},[a("el-radio",{attrs:{label:s},on:{change:function(e){t.addEvent(s)}},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("\n                                                    "+t._s(null)+"\n                                                ")])],1),a("el-col",{attrs:{span:2}},[t._v("\n                                                "+t._s(e.num)+"\n                                            ")]),a("el-col",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},attrs:{span:4}},[t._v("\n                                                "+t._s(e.name)+"\n                                            ")]),a("el-col",{staticStyle:{"padding-top":"1px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},attrs:{span:4}},[t._v("\n                                                "+t._s(e.desc)+"\n                                            ")]),a("el-col",{attrs:{span:8}},[t._v("\n                                                "+t._s(e.url)+"\n                                            ")])],1)],1)}),0)],1),a("div",{staticClass:"block",staticStyle:{float:"right",position:"relative"}},[a("el-pagination",{attrs:{"current-page":t.apiMsgPage.currentPage,"page-size":t.apiMsgPage.sizePage,"page-sizes":[15,30,45,60],layout:"total, sizes, prev, pager, next, jumper",total:t.apiMsgPage.total},on:{"current-change":t.handleCurrentCase,"size-change":t.handleSizeCase}})],1)],1),a("el-tab-pane",{attrs:{label:"步骤配置",name:"second"}},[a("apiMsgDataEdit",{ref:"apiMessageEditFunc",attrs:{apiCases:t.caseData.apiCases}})],1)],1)],1)],1),a("div",{staticStyle:{"margin-top":"10px",float:"right"}},[a("el-button",{attrs:{type:"success",size:"small"},nativeOn:{click:function(e){t.addCase(!1)}}},[t._v("保 存")])],1)],1)],1),a("el-dialog",{attrs:{title:"加载配置",visible:t.configShow,width:"30%"},on:{"update:visible":function(e){t.configShow=e}}},[a("el-form",{staticClass:"demo-form-inline ",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:" ",labelWidth:"10px"}},[a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{placeholder:"请选择项目"},on:{change:t.changeConfigChoice},model:{value:t.form.sceneVariableProjectName,callback:function(e){t.$set(t.form,"sceneVariableProjectName",e)},expression:"form.sceneVariableProjectName"}},t._l(t.proModelData,function(t,e){return a("el-option",{key:e,attrs:{value:e}})}),1),a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{"value-key":"configId",placeholder:"请选择配置"},model:{value:t.form.config,callback:function(e){t.$set(t.form,"config",e)},expression:"form.config"}},t._l(t.configData[t.form.sceneVariableProjectName],function(t){return a("el-option",{key:t.configId,attrs:{label:t.name,value:t}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.configShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.addConfigData()}}},[t._v("确 定")])],1)],1)],1)},de=[],pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.paramVisible,expression:"!paramVisible"}],staticClass:"apiMsgDataEdit",attrs:{"element-loading-text":"左侧列表数据发生变化，请点击配置按钮重新配置","element-loading-spinner":"my-icon-2"}},[a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"card"}},[a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"接口信息"}},[a("el-form",[a("el-form-item",{attrs:{label:"用例名称",prop:"name","label-width":"120px"}},[a("el-input",{model:{value:t.apiCaseData.name,callback:function(e){t.$set(t.apiCaseData,"name",e)},expression:"apiCaseData.name"}})],1),a("el-form-item",{attrs:{label:"set_up_hooks","label-width":"120px"}},[a("el-input",{model:{value:t.apiCaseData.upFunc,callback:function(e){t.$set(t.apiCaseData,"upFunc",e)},expression:"apiCaseData.upFunc"}})],1),a("el-form-item",{attrs:{label:"set_down_hooks","label-width":"120px"}},[a("el-input",{model:{value:t.apiCaseData.downFunc,callback:function(e){t.$set(t.apiCaseData,"downFunc",e)},expression:"apiCaseData.downFunc"}})],1)],1)],1),a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"Headers"}},[a("el-card",{attrs:{shadow:"hover","body-style":t.styleCard}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addCaseHeader()}}},[t._v("添加\n                    ")]),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动功能"},model:{value:t.apiCaseData.statusCase.header[0],callback:function(e){t.$set(t.apiCaseData.statusCase.header,0,e)},expression:"apiCaseData.statusCase.header[0]"}}),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动新参数"},model:{value:t.apiCaseData.statusCase.header[1],callback:function(e){t.$set(t.apiCaseData.statusCase.header,1,e)},expression:"apiCaseData.statusCase.header[1]"}})],1),a("el-table",{attrs:{data:t.apiCaseData.header,size:"mini",stripe:""}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",id:"url_input"+e.$index,type:"textarea",rows:"1",resize:"none"},on:{focus:function(a){t.showLine("url_input",e.$index)},input:function(e){t.changeLine()},blur:function(a){t.resetLine(e.$index)}},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delCaseHeader(e.$index)}}},[t._v("删除\n                            ")])]}}])})],1)],1),a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"Params"}},[a("el-card",{attrs:{shadow:"hover","body-style":t.styleCard}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addCaseParam()}}},[t._v("添加\n                    ")]),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动功能"},model:{value:t.apiCaseData.statusCase.param[0],callback:function(e){t.$set(t.apiCaseData.statusCase.param,0,e)},expression:"apiCaseData.statusCase.param[0]"}}),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动新参数"},model:{value:t.apiCaseData.statusCase.param[1],callback:function(e){t.$set(t.apiCaseData.statusCase.param,1,e)},expression:"apiCaseData.statusCase.param[1]"}})],1),a("el-table",{attrs:{data:t.apiCaseData.param,size:"mini",stripe:""}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",id:"url_input"+e.$index,type:"textarea",rows:"1",resize:"none"},on:{focus:function(a){t.showLine("url_input",e.$index)},input:function(e){t.changeLine()},blur:function(a){t.resetLine(e.$index)}},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delCaseParam(e.$index)}}},[t._v("删除\n                            ")])]}}])})],1)],1),a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"Body"}},[a("el-card",{attrs:{shadow:"hover","body-style":t.styleCard}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.form.choiceTypeStatus},on:{click:function(e){t.addCaseVariable()}}},[t._v("添加\n                    ")]),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动功能"},model:{value:t.apiCaseData.statusCase.variable[0],callback:function(e){t.$set(t.apiCaseData.statusCase.variable,0,e)},expression:"apiCaseData.statusCase.variable[0]"}}),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动新参数"},model:{value:t.apiCaseData.statusCase.variable[1],callback:function(e){t.$set(t.apiCaseData.statusCase.variable,1,e)},expression:"apiCaseData.statusCase.variable[1]"}})],1),"json"===t.form.choiceType.toString()?a("div",[a("div",{staticStyle:{margin:"0 0 15px"}}),a("div",{staticStyle:{"border-style":"solid","border-width":"1px","border-color":"rgb(234, 234, 234) rgb(234, 234, 234) rgb(234, 234, 234) rgb(234, 234, 234)"}},[a("el-container",[a("editor",{staticStyle:{"font-size":"15px"},attrs:{lang:"json",theme:"chrome",width:"100%",height:"500px",options:{}},on:{init:t.editorInit},model:{value:t.apiCaseData.json_variable,callback:function(e){t.$set(t.apiCaseData,"json_variable",e)},expression:"apiCaseData.json_variable"}})],1)],1)]):t._e(),"data"===t.form.choiceType?a("el-table",{attrs:{data:t.apiCaseData.variable,size:"mini",stripe:""}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{property:"type",label:"type","header-align":"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{size:"mini"},model:{value:e.row.param_type,callback:function(a){t.$set(e.row,"param_type",a)},expression:"scope.row.param_type"}},t._l(t.paramTypes,function(t){return a("el-option",{key:t,attrs:{value:t}})}),1)]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return["file"===e.row.param_type?a("div",[a("el-row",[a("el-col",{attrs:{span:17}},[a("el-input",{attrs:{size:"mini",disabled:!0},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})],1),a("el-col",{attrs:{span:1}},[a("p")]),a("el-col",{attrs:{span:3}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/upload","show-file-list":!1,"on-success":t.fileChange}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.tempNumTwo(e.$index)}}},[t._v("点击上传\n                                            ")])],1)],1)],1)],1):a("div",[a("el-input",{attrs:{size:"mini",id:"data2_input"+e.$index,type:"textarea",rows:"1",resize:"none"},on:{focus:function(a){t.showLine("data2_input",e.$index)},input:function(e){t.changeLine()},blur:function(a){t.resetLine(e.$index)}},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})],1)]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delCaseVariable(e.$index)}}},[t._v("删除\n                            ")])]}}])})],1):t._e()],1),a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"Extract"}},[a("el-card",{attrs:{shadow:"hover","body-style":t.styleCard}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addCaseExtract()}}},[t._v("添加\n                    ")]),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动功能"},model:{value:t.apiCaseData.statusCase.extract[0],callback:function(e){t.$set(t.apiCaseData.statusCase.extract,0,e)},expression:"apiCaseData.statusCase.extract[0]"}}),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动新参数"},model:{value:t.apiCaseData.statusCase.extract[1],callback:function(e){t.$set(t.apiCaseData.statusCase.extract,1,e)},expression:"apiCaseData.statusCase.extract[1]"}})],1),a("el-table",{attrs:{data:t.apiCaseData.extract,size:"mini",stripe:""}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"备注","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delCaseExtract(e.$index)}}},[t._v("删除\n                            ")])]}}])})],1)],1),a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"Assert"}},[a("el-card",{attrs:{shadow:"hover","body-style":t.styleCard}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addCaseValidate()}}},[t._v("添加\n                    ")]),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动功能"},model:{value:t.apiCaseData.statusCase.validate[0],callback:function(e){t.$set(t.apiCaseData.statusCase.validate,0,e)},expression:"apiCaseData.statusCase.validate[0]"}}),a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"inactive-text":"启动新参数"},model:{value:t.apiCaseData.statusCase.validate[1],callback:function(e){t.$set(t.apiCaseData.statusCase.validate,1,e)},expression:"apiCaseData.statusCase.validate[1]"}})],1),a("el-table",{attrs:{data:t.apiCaseData.validate,size:"mini",stripe:""}},[a("el-table-column",{attrs:{property:"key",label:"Key","header-align":"center",minWidth:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.key,callback:function(a){t.$set(e.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{label:"Comparator","header-align":"center",minWidth:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入内容",size:"mini"},model:{value:e.row.comparator,callback:function(a){t.$set(e.row,"comparator",a)},expression:"scope.row.comparator"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"Value","header-align":"center",minWidth:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{property:"value",label:"操作","header-align":"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.delCaseValidate(e.$index)}}},[t._v("删除\n                            ")])]}}])})],1)],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"5px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.initData(t.tempNum)}}},[t._v("还 原")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.sureConfigBtn()}}},[t._v("保 存\n            ")]),a("el-tooltip",{staticStyle:{"margin-left":"10px"},attrs:{content:"ps:信息修改后，记得点击保存哦(右下角的保存按钮不保存当前步骤信息)"}},[a("div",{staticClass:"my-icon-cuowu"})])],1)],1)},ue=[],me={components:{editor:a("7c9e")},name:"apiMsgDataEdit",props:["apiCases"],data(){return{styleCard:{padding:"5px"},choiceVariableType:[{value:"选项1",label:"data"},{value:"选项2",label:"json"}],comparators:[{value:"equals"},{value:"less_than"},{value:"less_than_or_equals"},{value:"greater_than"},{value:"greater_than_or_equals"},{value:"not_equals"},{value:"string_equals"},{value:"length_equals"},{value:"length_greater_than"},{value:"count_greater_than_or_equals"},{value:"length_less_than"},{value:"length_less_than_or_equals"}],paramTypes:["string","file"],paramVisible:!1,temp_num:"",tempNum:"",cell:Object(),form:{choiceTypeStatus:!1,choiceType:"data"},tempApiCaseData:"",apiCaseData:{name:"",time:"",upFunc:"",downFunc:"",statusCase:{variable:[],extract:[],validate:[],param:[],header:[]},variable:[{key:"",value:"",param_type:"",remark:""}],json_variable:"",extract:[{key:"",value:""}],validate:[{key:"",value:"",comparator:""}],param:[{key:"",value:"",remark:""}],header:[{key:"",value:"",remark:""}]}}},methods:{editorInit(){a("2099"),a("818b"),a("95b8"),a("b039")},resetLine(){this.cell.style.height="18px"},showLine(t,e){this.cell=document.getElementById(t+e),this.cell.style.height=this.cell.scrollHeight+"px"},changeLine(){if(this.cell.style.height!==this.cell.scrollHeight+"px"){let t=parseInt(this.cell.style.height.substring(0,this.cell.style.height.length-2));t-this.cell.scrollHeight===2&&(this.cell.style.height=t-18+"px"),this.cell.style.height=this.cell.scrollHeight+"px"}},initData(t){this.apiCaseData.param=this.apiCases[t]["param"],this.apiCaseData.variable=this.apiCases[t]["variable"],this.apiCaseData.json_variable=this.apiCases[t]["json_variable"],this.apiCaseData.extract=this.apiCases[t]["extract"],this.apiCaseData.validate=this.apiCases[t]["validate"],this.apiCaseData.header=this.apiCases[t]["header"],this.apiCaseData.statusCase=this.apiCases[t]["statusCase"],this.form.choiceType=this.apiCases[t]["variableType"],this.apiCaseData.name=this.apiCases[t]["case_name"],this.apiCaseData.time=this.apiCases[t]["time"],this.apiCaseData.upFunc=this.apiCases[t]["up_func"],this.apiCaseData.downFunc=this.apiCases[t]["down_func"],this.tempNum=t,this.paramVisible=!0,"json"===this.form.choiceType?this.form.choiceTypeStatus=!0:this.form.choiceTypeStatus=!1},querySearch(t,e){e(this.comparators)},addCaseVariable(){this.apiCaseData.variable.push({key:"",value:"",param_type:"string",remark:""})},delCaseVariable(t){this.apiCaseData.variable.splice(t,1)},addCaseExtract(){this.apiCaseData.extract.push({key:"",value:"",remark:""})},delCaseExtract(t){this.apiCaseData.extract.splice(t,1)},addCaseParam(){this.apiCaseData.param.push({key:"",value:"",remark:""})},delCaseParam(t){this.apiCaseData.param.splice(t,1)},addCaseHeader(){this.apiCaseData.header.push({key:"",value:"",remark:""})},delCaseHeader(t){this.apiCaseData.header.splice(t,1)},addCaseValidate(){this.apiCaseData.validate.push({key:"",value:""})},delCaseValidate(t){this.apiCaseData.validate.splice(t,1)},fileChange(t,e){0===t["status"]?this.$confirm("服务器已存在相同名字文件，是否覆盖?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=new FormData;t.append("file",e.raw),t.append("skip","1"),this.$axios.post("/api/upload",t).then(t=>{this.$message({showClose:!0,message:t.data["msg"],type:"success"}),this.apiCaseData.variable[this.temp_num]["value"]=t.data["data"]})}).catch(()=>{}):(t["msg"]&&this.$message({showClose:!0,message:t["msg"],type:"success"}),this.apiCaseData.variable[this.temp_num]["value"]=t["data"])},tempNumTwo(t){this.temp_num=t},sureConfigBtn(){if("json"===this.form.choiceType.toString()&&this.apiCaseData.json_variable)try{JSON.parse(this.apiCaseData.json_variable)}catch(t){return void this.$message({showClose:!0,message:"json格式错误",type:"warning"})}this.apiCaseData.downFunc?this.apiCases[this.tempNum]["down_func"]=this.apiCaseData.downFunc:this.apiCases[this.tempNum]["down_func"]="",this.apiCaseData.upFunc?this.apiCases[this.tempNum]["up_func"]=this.apiCaseData.upFunc:this.apiCases[this.tempNum]["up_func"]="",this.apiCaseData.name?(this.apiCases[this.tempNum]["case_name"]=this.apiCaseData.name,this.apiCases[this.tempNum]["json_variable"]=this.apiCaseData.json_variable,this.$message({showClose:!0,message:"步骤配置保存成功",type:"success"})):this.$message({showClose:!0,message:"请输入用例名称",type:"warning"})}},mounted(){}},he=me,fe=(a("5217"),Object(d["a"])(he,pe,ue,!1,null,null,null));fe.options.__file="apiMsgDataEdit.vue";var ge=fe.exports,ve=a("1516"),be=a.n(ve),we={components:{draggable:be.a,apiMsgDataEdit:ge},name:"sceneEdit",props:["proModelData","projectName","allSetList","setTempData","configData","funcAddress"],data(){return{apiMsgVessel:[],ApiMsgData:[],mainWidth:"50%",radio:"",tabName:"first",showApiDataStatus:!0,stepSpan:24,draggableOptions:{group:{name:"apiData",pull:"clone",put:!1},sort:!1},apiMsgPage:{total:1,currentPage:1,sizePage:15},form:{config:{name:null,configId:null},set:{label:null,id:null},module:{name:null,moduleId:null},projectName:"",apiMesProjectName:"",sceneVariableProjectName:"",apiName:""},caseData:{id:"",num:"",funcAddress:Array(),modelFormVisible:!1,projectName:"",variable:[],desc:"",times:"",name:"",environment:"",formLabelWidth:"70px",apiCases:[]},configShow:!1,environmentList:["测试环境","开发环境","线上环境","备用环境"]}},methods:{apiMessageEditFuncInit(t){this.showApiDataStatus=!1,this.tabName="second",this.$refs.apiMessageEditFunc.initData(t),this.mainWidth="80%",this.stepSpan=12},addEvent(t){this.apiMsgVessel=this.ApiMsgData[t]},showApiData:function(){this.showApiDataStatus=!this.showApiDataStatus,this.showApiDataStatus?(this.mainWidth="50%",this.stepSpan=24):(this.mainWidth="80%",this.stepSpan=12,this.tabName="first")},changeShow(t){"用例信息"===t.label?this.mainWidth="50%":this.showApiDataStatus?this.mainWidth="50%":this.mainWidth="80%"},synchronousData(){let t=this.allSetList[this.projectName].map(t=>t.id).indexOf(this.setTempData.setId);this.form.set=this.allSetList[this.projectName][t],this.form.module=this.proModelData[this.projectName][0],this.form.config=this.configData[this.projectName][0],this.form.projectName=this.projectName,this.form.apiMesProjectName=this.projectName,this.form.sceneVariableProjectName=this.projectName},initCaseData(){this.projectName&&(this.synchronousData(),0===this.allSetList[this.projectName].length)?this.$message({showClose:!0,message:"请先创建用例集",type:"warning"}):(this.caseData.apiCases=[],this.caseData.variable=[{key:"",value:"",remark:""}],this.caseData.name="",this.caseData.times="",this.caseData.desc="",this.caseData.id="",this.caseData.environment="",this.caseData.funcAddress=Array(),this.caseData.num="",this.caseData.modelFormVisible=!0,this.apiMsgVessel=[],this.findApiMsg())},editCase(t,e=!1){this.synchronousData(),this.$axios.post(this.$api.editCaseApi,{caseId:t,copyEditStatus:e}).then(a=>{this.caseData.name=a.data["data"]["name"],this.caseData.desc=a.data["data"]["desc"],this.caseData.times=a.data["data"]["times"],this.caseData.funcAddress=a.data["data"]["func_address"],this.caseData.apiCases=a.data["data"]["cases"],this.caseData.variable=a.data["data"]["variable"],e?(this.caseData.id="",this.caseData.num=""):(this.caseData.id=t,this.caseData.num=a.data["data"]["num"]),this.caseData.modelFormVisible=!0,this.caseData.environment=this.environmentList[a.data["data"]["environment"]],this.findApiMsg()})},changeSetChoice(){let t=this.allSetList[this.form.projectName][0];this.form.set=t||null},changeModuleChoice(){let t=this.proModelData[this.form.apiMesProjectName][0];t?(this.form.module=t,this.apiMsgPage.currentPage=1,this.apiMsgPage.sizePage=15,this.findApiMsg()):(this.form.module={name:null,moduleId:null},this.ApiMsgData=[],this.apiMsgPage.total=0)},changeConfigChoice(){let t=this.configData[this.form.sceneVariableProjectName][0];this.form.config=t||null},upNum(t){if(0===t)return void this.$message({showClose:!0,message:"当前序号已最高",type:"warning"});let e=this.caseData.variable[t];this.caseData.variable.splice(t,1),this.caseData.variable.splice(t-1,0,e)},downNum(t){if(t===this.caseData.variable.length-1)return void this.$message({showClose:!0,message:"当前序号已最低",type:"warning"});let e=this.caseData.variable[t];this.caseData.variable.splice(t,1),this.caseData.variable.splice(t+1,0,e)},delApiCase(t){"id"in this.caseData.apiCases[t]?this.$confirm('是否删除用例中已保存的步骤：<strong style="color: red;">'+this.caseData.apiCases[t]["case_name"]+"</strong>?","提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.post("/api/apiCase/del",{id:this.caseData.apiCases[t]["id"]}).then(()=>{this.caseData.apiCases.splice(t,1)})}).catch(()=>{}):this.caseData.apiCases.splice(t,1)},handleCurrentCase(t){this.apiMsgPage.currentPage=t,this.findApiMsg()},handleSizeCase(t){this.apiMsgPage.sizePage=t,this.findApiMsg()},findApiMsg(){this.radio=!1,this.$axios.post(this.$api.findApiApi,{projectName:this.form.apiMesProjectName,moduleId:this.form.module.moduleId,apiName:this.form.apiName,page:this.apiMsgPage.currentPage,sizePage:this.apiMsgPage.sizePage}).then(t=>{this.messageShow(this,t)&&(this.radio=!1,this.ApiMsgData=t.data["data"],this.apiMsgPage.total=t.data["total"])})},addApiData(){0!==this.apiMsgVessel.length?(this.caseData.apiCases=this.caseData.apiCases.concat(this.apiMsgVessel),this.caseData.apiCases=JSON.parse(JSON.stringify(this.caseData.apiCases))):this.$message({showClose:!0,message:"请勾选接口信息",type:"warning"})},addConfigData(){this.$axios.post(this.$api.configDataApi,{configId:this.form.config.configId}).then(t=>{this.caseData.variable=this.caseData.variable.concat(t.data["data"]["variables"]),this.caseData.variable=JSON.parse(JSON.stringify(this.caseData.variable)),this.caseData.funcAddress=t.data["data"]["func_address"],this.configShow=!1})},addConfigVariable(){this.caseData.variable.push({key:"",value:"",remark:""})},delConfigVariable(t){this.caseData.variable.splice(t,1)},addCase(t=!0){if(0!==this.caseData.apiCases.length)if(""!==this.caseData.name&&null!==this.caseData.name){for(let t=0;t<this.caseData.apiCases.length;t++)if(!/(^[1-9]\d*$)/.test(this.caseData.apiCases[t]["time"]))return void this.$message({showClose:!0,message:"第"+t+"条用例的执行次数请输入正整数",type:"warning"});this.$axios.post(this.$api.addCaseApi,{num:this.caseData.num,name:this.caseData.name,times:this.caseData.times,caseSetId:this.form.set.id,desc:this.caseData.desc,environment:this.environmentList.indexOf(this.caseData.environment),funcAddress:this.caseData.funcAddress,variable:JSON.stringify(this.caseData.variable),project:this.form.projectName,ids:this.caseData.id,apiCases:this.caseData.apiCases}).then(e=>{this.messageShow(this,e)&&(t?this.caseData.modelFormVisible=!1:e.data["case_id"]&&this.editCase(e.data["case_id"]))})}else this.$message({showClose:!0,message:"用例名字不能为空",type:"warning"});else this.$message({showClose:!0,message:"请添加接口信息到执行步骤",type:"warning"})}},computed:{monitorApiCases(){return this.caseData.apiCases}},watch:{monitorApiCases:{handler:function(){this.$refs.apiMessageEditFunc&&(this.$refs.apiMessageEditFunc.paramVisible=!1)}}},mounted(){}},ye=we,De=(a("9e83"),Object(d["a"])(ye,ce,de,!1,null,null,null));De.options.__file="caseEdit.vue";var xe=De.exports,_e={components:{setEdit:re,caseEdit:xe,errorView:Y,result:O},name:"modeManage",data(){return{defaultProps:{children:"children",label:"label"},tabValue:"first",tabEditShow:!1,allSetList:"",setDataList:[],funcAddress:"",caseList:[],proModelData:"",proAndIdData:"",loading:!1,configData:"",caseAll:[],casePage:{total:1,currentPage:1,sizePage:20},setPage:{total:1,currentPage:1,sizePage:30},setTempData:{name:null,setId:null},form:{projectName:"",caseName:""}}},methods:{handleNodeClick(t){this.setTempData.setId=t["id"],this.setTempData.name=t["label"],this.casePage.currentPage=1,this.findCase()},querySearch(t,e){e(this.comparators)},dropdownSetEvent(t){"add"===t?this.$refs.setEditFunc.initSet():"edit"===t?this.$refs.setEditFunc.editSet():"stick"===t?this.$refs.setEditFunc.stickSet(this.setTempData.setId):"del"===t&&this.sureView(this.delSet,null,this.setTempData.name)},findCase(){this.$axios.post(this.$api.findCaseApi,{setId:this.setTempData.setId,projectName:this.form.projectName,caseName:this.form.caseName,page:this.casePage.currentPage,sizePage:this.casePage.sizePage}).then(t=>{this.messageShow(this,t)&&(this.caseAll=t.data["data"],this.casePage.total=t.data["total"])})},initData(){this.$axios.get(this.$api.baseDataApi).then(t=>{this.proModelData=t.data["data"],this.proAndIdData=t.data["pro_and_id"],this.configData=t.data["config_name_list"],t.data["user_pro"]&&(this.form.projectName=t.data["user_pro"]["pro_name"],this.findSet()),this.allSetList=t.data["set_list"]}),this.$axios.post(this.$api.getFuncAddressApi).then(t=>{this.funcAddress=t["data"]["data"]})},initProjectChoice(){this.setPage.currentPage=1,this.casePage.currentPage=1,this.findSet()},findSet(){this.$axios.post(this.$api.findCaseSetApi,{projectName:this.form.projectName,page:this.setPage.currentPage,sizePage:this.setPage.sizePage}).then(t=>{this.setDataList=t.data["data"],this.allSetList[this.form.projectName]=t.data["all_set"],this.setPage.total=t.data["total"],this.setDataList[0]&&(this.setTempData.setId=this.setDataList[0]["id"],this.setTempData.name=this.setDataList[0]["label"],this.$nextTick(function(){this.$refs.testTree.setCurrentKey(this.setTempData.setId),this.findCase()}))})},handleCaseCurrentChange(t){this.casePage.currentPage=t,this.findCase()},handleCaseSizeChange(t){this.casePage.sizePage=t,this.findCase()},handleSetCurrentChange(t){this.setPage.currentPage=t,this.findSet()},delCase(t){this.$axios.post(this.$api.delCaseApi,{caseId:t}).then(t=>{this.messageShow(this,t),this.form.caseName="",this.findCase()})},runScene(t,e=!1,a=!1){let s=[];if(0!==t.length){if(e)for(let e=0;e<t.length;e++)s.push(t[e].sceneId);else s.push(t);this.loading=!0,this.$axios.post(this.$api.runCaseApi,{reportStatus:a,sceneIds:s,projectName:this.form.projectName}).then(t=>{if(this.loading=!1,0===t.data["status"])this.$message({showClose:!0,message:t.data["msg"],type:"warning"}),t.data["error"]&&this.$refs.errorViewFunc.showData(t.data["error"]);else if(this.$message({showClose:!0,message:t.data["msg"],type:"success"}),a){let{href:e}=this.$router.resolve({path:"reportShow",query:{reportId:t.data["data"]["report_id"]}});window.open(e,"_blank")}else{let e={details:[{records:[],in_out:{out:""}}]};for(let a=0;a<t["data"]["data"]["data"]["details"].length;a++)e["details"][0]["records"]=e["details"][0]["records"].concat(t["data"]["data"]["data"]["details"][a]["records"]);this.$refs.resultFunc.showData(e)}})}else this.$message({showClose:!0,message:"请选择测试用例",type:"warning"})},handleCaseSelection(t){this.caseList=t},cancelSelection(){this.$refs.sceneMultipleTable.clearSelection()},addCase(){this.tabEditShow=!0,this.tabValue="second",setTimeout(()=>{this.$refs.caseEditFunc.initCaseData()},0)},editCase(t){this.tabEditShow=!0,this.tabValue="second",setTimeout(()=>{this.$refs.caseEditFunc.editCase(t)},0)},delSet(){this.$axios.post(this.$api.delCaseSetApi,{id:this.setTempData.setId}).then(t=>{this.messageShow(this,t)&&this.findSet()})},tabChange(t){"用例信息"===t.label&&this.findCase()}},mounted(){this.initData()}},ke=_e,Ce=Object(d["a"])(ke,ee,ae,!1,null,null,null);Ce.options.__file="case.vue";var Se=Ce.exports,$e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"test"},[a("div",{staticStyle:{margin:"10px","padding-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.initCase(1)}}},[t._v("测试用例转化")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.initCase(2)}}},[t._v("测试用例转化2")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.buildIdentity()}}},[t._v("生成银行信息三要素")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.getSmscode()}}},[t._v("获取短信验证码")])],1),a("div",{staticStyle:{margin:"20px 0"}}),a("div",[t.showBuildIdentityTable?[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.identityData}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"identity",label:"身份证",width:"180"}}),a("el-table-column",{attrs:{prop:"bankcard",label:"银行卡"}})],1)]:t._e(),t.showSmscodeTable?[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.smscodeData}},[a("el-table-column",{attrs:{prop:"mobile",label:"手机号",width:"180"}}),a("el-table-column",{attrs:{prop:"msg",label:"短信验证码","min-width":"360"}})],1)]:t._e()],2),a("el-dialog",{attrs:{title:"用例转化",visible:t.testCase.viewStatus,width:"30%"},on:{"update:visible":function(e){t.$set(t.testCase,"viewStatus",e)}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"文件地址"}},[a("el-input",{attrs:{size:"medium",disabled:!0},model:{value:t.testCase.address,callback:function(e){t.$set(t.testCase,"address",e)},expression:"testCase.address"}})],1),a("el-form-item",[a("el-upload",{staticClass:"upload-demo",attrs:{action:this.$api.fileUploadingApi,"show-file-list":!1,"on-success":t.getFileAddress}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.testCase.viewStatus=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.initCaseChange()}}},[t._v("确 定")])],1)],1)],1)},Ae=[],Me={name:"test",data(){return{showBuildIdentityTable:!1,identityData:[],showSmscodeTable:!1,smscodeData:[],data:[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]}],defaultProps:{children:"children",label:"label"},status:1,value6:"",token:"",showData:"",testCase:{viewStatus:!1,address:""}}},mounted(){},methods:{allowDrag(t){return-1===t.data.label.indexOf("三级 3-2-2")},initCase(t){this.status=t,this.testCase.viewStatus=!0,this.testCase.address=""},getFileAddress(t,e){0===t["status"]?this.$confirm("服务器已存在相同名字文件，是否覆盖?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=new FormData;t.append("file",e.raw),t.append("skip","1"),this.$axios.post("/api/upload",t).then(t=>{this.$message({showClose:!0,message:t.data["msg"],type:"success"}),this.testCase.address=t["data"]["data"]})}).catch(()=>{}):(t["msg"]&&this.$message({showClose:!0,message:t["msg"],type:"success"}),this.testCase.address=t["data"])},buildIdentity(){this.$axios.get("/api/buildIdentity",{}).then(t=>{0===t.data["status"]?this.$message({showClose:!0,message:t.data["msg"],type:"warning"}):(this.identityData=[{name:t.data["data"]["name"],identity:t.data["data"]["identity_data"],bankcard:t.data["data"]["bankcard"]}],this.showBuildIdentityTable=!0,this.showSmscodeTable=!1)})},getSmscode(){this.$axios.get("/api/getSmscode",{}).then(t=>{0===t.data["status"]?this.$message({showClose:!0,message:t.data["msg"],type:"warning"}):(console.log("response",t.data),this.smscodeData=t.data["data"],this.showSmscodeTable=!0,this.showBuildIdentityTable=!1)})},initCaseChange(){this.$axios.post("/api/caseChange",{address:this.testCase.address,choice:this.status}).then(t=>{if(0===t.data["status"])this.$message({showClose:!0,message:t.data["msg"],type:"warning"});else{let e=document.createElement("a");e.style.display="none",e.href=t.data["data"],document.body.appendChild(e),e.click(),this.testCase.viewStatus=!1}})}}},je=Me,ze=(a("4fcb"),Object(d["a"])(je,$e,Ae,!1,null,null,null));ze.options.__file="testTool.vue";var Ne=ze.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modeManage"},[a("el-form",{staticClass:"demo-form-inline search-style",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"项目",labelWidth:"80px"}},[a("el-select",{attrs:{placeholder:"选择项目"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}},t._l(t.proModelData,function(t){return a("el-option",{key:t.name,attrs:{value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"任务",labelWidth:"50px"}},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(e){t.handleCurrentChange(1)}}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.initTaskData()}}},[t._v("添加任务\n            ")])],1)],1),a("el-tabs",{staticClass:"table_padding",attrs:{value:"first"}},[a("el-tab-pane",{staticStyle:{margin:"0 0 -10px"},attrs:{label:"任务列表",name:"first"}},[a("el-table",{attrs:{data:t.tableData,"max-height":"748",stripe:""}},[a("el-table-column",{attrs:{prop:"task_name",label:"任务名称","min-width":"100"}}),a("el-table-column",{attrs:{prop:"task_config_time",label:"cron","min-width":"100"}}),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:"创建"===e.row.status?"info":"启动"===e.row.status?"success":"warning"}},[t._v("\n                            "+t._s(e.row.status)+"\n                        ")])]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"primary"}},[t._v(t._s(null))]),"创建"===t.tableData[e.$index]["status"]?a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){t.editTask(t.tableData[e.$index]["id"])}}},[t._v("修改\n                        ")]):t._e(),"创建"===t.tableData[e.$index]["status"]?a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){t.startTask(t.tableData[e.$index]["id"])}}},[t._v("启动\n                        ")]):t._e(),"创建"!==t.tableData[e.$index]["status"]?a("el-button",{directives:[{name:"show",rawName:"v-show",value:"暂停"!==t.tableData[e.$index]["status"],expression:"tableData[scope.$index]['status'] !== '暂停'"}],attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){t.pauseTask(t.tableData[e.$index]["id"])}}},[t._v("暂停\n                        ")]):t._e(),"创建"!==t.tableData[e.$index]["status"]?a("el-button",{directives:[{name:"show",rawName:"v-show",value:"启动"!==t.tableData[e.$index]["status"],expression:"tableData[scope.$index]['status'] !== '启动'"}],attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){t.resumeTask(t.tableData[e.$index]["id"])}}},[t._v("恢复\n                        ")]):t._e(),"创建"!==t.tableData[e.$index]["status"]?a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){t.removeTask(t.tableData[e.$index]["id"])}}},[t._v("移除\n                        ")]):t._e(),a("el-button",{attrs:{type:"success",size:"mini",loading:t.runStatus},nativeOn:{click:function(a){t.runNow(t.tableData[e.$index]["id"])}}},[t._v("单次运行\n                        ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.sureView(t.delTask,t.tableData[e.$index]["id"],t.tableData[e.$index]["task_name"])}}},[t._v("\n                            删除\n                        ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.sizePage,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"任务配置",visible:t.taskData.modelFormVisible,width:"42%"},on:{"update:visible":function(e){t.$set(t.taskData,"modelFormVisible",e)}}},[a("el-tabs",[a("el-tab-pane",{staticStyle:{"margin-top":"10px"},attrs:{label:"messages"}},[a("el-form",[a("el-form-item",{attrs:{label:"执行选择","label-width":t.taskData.formLabelWidth}},[a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{placeholder:"选择项目"},on:{change:t.changeProjectChoice},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}},t._l(t.proModelData,function(t){return a("el-option",{key:t.name,attrs:{value:t.name}})}),1),a("el-select",{staticStyle:{width:"150px","padding-right":"5px"},attrs:{multiple:"",placeholder:"选择用例集","value-key":"id"},on:{change:t.changeSceneChoice},model:{value:t.form.set,callback:function(e){t.$set(t.form,"set",e)},expression:"form.set"}},t._l(t.allSetList[this.form.projectName],function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t}})}),1),a("el-select",{staticStyle:{width:"150px"},attrs:{multiple:"",placeholder:"选择用例","value-key":"id",disabled:t.caseStatus},model:{value:t.form.case,callback:function(e){t.$set(t.form,"case",e)},expression:"form.case"}},t._l(t.allSceneList[this.form.set_id],function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t}})}),1)],1),a("el-form-item",{attrs:{label:"任务名称","label-width":t.taskData.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.taskData.name,callback:function(e){t.$set(t.taskData,"name",e)},expression:"taskData.name"}})],1),a("el-form-item",{attrs:{label:"收件人邮箱","label-width":t.taskData.formLabelWidth}},[a("el-input",{model:{value:t.taskData.toEmail,callback:function(e){t.$set(t.taskData,"toEmail",e)},expression:"taskData.toEmail"}})],1),a("el-form-item",{attrs:{label:"发件人邮箱","label-width":t.taskData.formLabelWidth}},[a("el-input",{model:{value:t.taskData.SendEmail,callback:function(e){t.$set(t.taskData,"SendEmail",e)},expression:"taskData.SendEmail"}})],1),a("el-form-item",{attrs:{label:"邮箱密码","label-width":t.taskData.formLabelWidth,prop:"desc"}},[a("el-input",{attrs:{type:"password"},model:{value:t.taskData.password,callback:function(e){t.$set(t.taskData,"password",e)},expression:"taskData.password"}})],1),a("el-form-item",{attrs:{label:"时间配置","label-width":t.taskData.formLabelWidth}},[a("el-input",{attrs:{placeholder:"second minute hour day month day_of_week(0 0 12 * * ? 每天中午12点触发)"},model:{value:t.taskData.timeConfig,callback:function(e){t.$set(t.taskData,"timeConfig",e)},expression:"taskData.timeConfig"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.taskData.modelFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.addTask()}}},[t._v("确 定\n            ")])],1)],1)],1)},Te=[],Fe={name:"modeManage",data(){return{proModelData:"",runStatus:!1,caseStatus:!1,allSetList:"",allSceneList:"",tableData:[],total:1,currentPage:1,sizePage:20,form:{set:{label:null,id:null},case:{label:null,id:null},set_id:"",projectName:"",modelName:"",taskName:""},taskData:{id:"",num:"",modelFormVisible:!1,projectName:"",name:"",taskType:"",toEmail:"",SendEmail:"",timeConfig:"",password:"",formLabelWidth:"90px"}}},methods:{httpSend(){this.$axios.get(this.$api.baseDataApi).then(t=>{t.data["user_pro"]&&(this.form.projectName=t.data["user_pro"]["pro_name"],this.findTask()),this.proModelData=t.data["pro_and_id"],this.allSetList=t.data["set_list"],this.allSceneList=t.data["scene_list"]})},changeProjectChoice(){this.form.set=[],this.form.case=[]},changeSceneChoice(){1===this.form.set.length?(this.caseStatus=!1,this.form.set_id=this.form.set[0].id):(this.caseStatus=!0,this.form.case=[],this.form.set_id="")},handleCurrentChange(t){this.currentPage=t,this.findTask()},handleSizeChange(t){this.sizePage=t,this.findTask()},findTask(){this.$axios.post(this.$api.findTaskApi,{projectName:this.form.projectName,taskName:this.form.taskName,page:this.currentPage,sizePage:this.sizePage}).then(t=>{0===t.data["status"]?this.$message({showClose:!0,message:t.data["msg"],type:"warning"}):(this.tableData=t.data["data"],this.total=t.data["total"])})},initTaskData(){this.taskData.name="",this.taskData.id="",this.taskData.taskType="",this.taskData.toEmail="",this.taskData.SendEmail="",this.taskData.timeConfig="",this.taskData.password="",this.form.set=[],this.form.case=[],this.taskData.num="",this.taskData.modelFormVisible=!0},addTask(){this.$axios.post(this.$api.addTaskApi,{projectName:this.form.projectName,setIds:this.form.set,caseIds:this.form.case,id:this.taskData.id,num:this.taskData.num,name:this.taskData.name,taskType:this.taskData.taskType,toEmail:this.taskData.toEmail,sendEmail:this.taskData.SendEmail,timeConfig:this.taskData.timeConfig,password:this.taskData.password}).then(t=>{0===t.data["status"]?this.$message({showClose:!0,message:t.data["msg"],type:"warning"}):(this.taskData.modelFormVisible=!1,this.$message({showClose:!0,message:t.data["msg"],type:"success"}),this.findTask())})},editTask(t){this.$axios.post(this.$api.editTaskApi,{id:t}).then(e=>{this.taskData.name=e.data["data"]["task_name"],this.taskData.timeConfig=e.data["data"]["task_config_time"],this.taskData.taskType=e.data["data"]["task_type"],this.taskData.toEmail=e.data["data"]["task_to_email_address"],this.taskData.SendEmail=e.data["data"]["task_send_email_address"],this.taskData.password=e.data["data"]["password"],this.taskData.num=e.data["data"]["num"],this.taskData.projectName=this.form.projectName,this.taskData.id=t,this.form.set=e.data["data"]["set_ids"],1===e.data["data"]["set_ids"].length?this.form.set_id=e.data["data"]["set_ids"][0]["id"]:this.caseStatus=!0,this.form.case=e.data["data"]["case_ids"],this.taskData.modelFormVisible=!0})},startTask(t){this.$axios.post(this.$api.startTaskApi,{id:t}).then(t=>{this.messageShow(this,t),this.findTask()})},pauseTask(t){this.$axios.post(this.$api.pauseTaskApi,{id:t}).then(t=>{this.messageShow(this,t),this.findTask()})},resumeTask(t){this.$axios.post(this.$api.resumeTaskApi,{id:t}).then(t=>{this.messageShow(this,t),this.findTask()})},removeTask(t){this.$axios.post(this.$api.removeTaskApi,{id:t}).then(t=>{this.messageShow(this,t),this.findTask()})},runNow(t){this.runStatus=!0,this.$axios.post(this.$api.runTaskApi,{id:t}).then(t=>{if(this.messageShow(this,t)){this.findTask();let{href:e}=this.$router.resolve({path:"reportShow",query:{reportId:t.data["data"]["report_id"]}});window.open(e,"_blank")}this.runStatus=!1})},delTask(t){this.$axios.post(this.$api.delTaskApi,{id:t}).then(t=>{this.messageShow(this,t),this.form.taskName="",(this.currentPage-1)*this.sizePage+1===this.total&&(this.currentPage=this.currentPage-1),this.findTask()})}},mounted(){this.httpSend()}},Oe=Fe,Ve=Object(d["a"])(Oe,Pe,Te,!1,null,null,null);Ve.options.__file="task.vue";var Ee=Ve.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userManage"},[a("el-form",{staticClass:"demo-form-inline search-style",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"用户名称",labelWidth:"110px"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(e){t.handleCurrentChange(1)}}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.initUserData()}}},[t._v("添加用户")])],1)],1),a("el-tabs",{staticStyle:{"padding-left":"10px"},attrs:{value:"first"}},[a("el-tab-pane",{staticClass:"table_padding",attrs:{label:"用户列表",name:"first"}},[a("el-table",{attrs:{data:t.tableData,stripe:"","max-height":"745"}},[a("el-table-column",{attrs:{prop:"user_id",label:"id",width:"80"}}),a("el-table-column",{attrs:{prop:"userName",label:"用户名称",width:"150"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:1===e.row.status?"success":"danger"}},[t._v("\n                            "+t._s(t.statusChineseShow(e.row.status))+"\n                        ")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},nativeOn:{click:function(a){t.editUser(t.tableData[e.$index]["user_id"])}}},[t._v("编辑\n                        ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1===e.row.status,expression:"scope.row.status === 1"}],attrs:{type:"info",size:"mini"},nativeOn:{click:function(a){t.changeUserStatus(t.tableData[e.$index]["user_id"])}}},[t._v("冻结\n                        ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.row.status,expression:"scope.row.status === 0"}],attrs:{type:"success",size:"mini"},nativeOn:{click:function(a){t.changeUserStatus(t.tableData[e.$index]["user_id"])}}},[t._v("恢复\n                        ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.sureView(t.delUser,t.tableData[e.$index]["user_id"],t.tableData[e.$index]["userName"]+"用户")}}},[t._v("删除\n                        ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.sizePage,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"账号设置",visible:t.userData.modelFormVisible,width:"30%"},on:{"update:visible":function(e){t.$set(t.userData,"modelFormVisible",e)}}},[a("el-form",[a("el-form-item",{attrs:{label:"姓名","label-width":t.userData.formLabelWidth}},[a("el-input",{model:{value:t.userData.name,callback:function(e){t.$set(t.userData,"name",e)},expression:"userData.name"}})],1),a("el-form-item",{attrs:{label:"账号","label-width":t.userData.formLabelWidth,prop:"num"}},[a("el-input",{model:{value:t.userData.account,callback:function(e){t.$set(t.userData,"account",t._n(e))},expression:"userData.account"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":t.userData.formLabelWidth,prop:"desc"}},[a("el-input",{staticStyle:{"max-width":"450px"},attrs:{type:"password",disabled:!t.userData.statusPassword},model:{value:t.userData.password,callback:function(e){t.$set(t.userData,"password",e)},expression:"userData.password"}}),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.userData.statusPassword,callback:function(e){t.$set(t.userData,"statusPassword",e)},expression:"userData.statusPassword"}})],1),a("el-form-item",{attrs:{label:"角色","label-width":t.userData.formLabelWidth,prop:"desc"}},[a("el-select",{attrs:{"value-key":"role_id",placeholder:"请选择角色"},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}},t._l(t.roleData,function(t){return a("el-option",{key:t.role_id,attrs:{label:t.role_name,value:t}})}),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.userData.modelFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.register()}}},[t._v("确 定")])],1)],1)],1)},Ie=[],We={name:"userManage",data(){return{tableData:Array(),total:1,currentPage:1,sizePage:20,roleData:[],form:{userName:null,role:{}},userData:{id:null,statusPassword:!1,modelFormVisible:!1,name:"",account:"",formLabelWidth:"60px",password:"",status:""}}},methods:{register(){this.form.role?this.$axios.post(this.$api.registerApi,{id:this.userData.id,name:this.userData.name,role_id:this.form.role.role_id,account:this.userData.account,password:this.userData.password,statusPassword:this.userData.statusPassword}).then(t=>{0===t.data["status"]?this.$message({showClose:!0,message:t.data["msg"],type:"warning"}):(this.$message({showClose:!0,message:t.data["msg"],type:"success"}),this.findUser(),this.userData.modelFormVisible=!1)}):this.$message({showClose:!0,message:"请选择角色",type:"warning"})},handleCurrentChange(t){this.currentPage=t,this.findUser()},handleSizeChange(t){this.sizePage=t,this.findUser()},findUser(){this.$axios.post(this.$api.findUserApi,{userName:this.form.userName,page:this.currentPage,sizePage:this.sizePage}).then(t=>{this.messageShow(this,t)&&(this.tableData=t.data["data"],this.total=t.data["total"],this.roleData=t.data["role_data"])})},initUserData(){this.userData.name="",this.userData.account="",this.userData.password="",this.userData.statusPassword=!0,this.userData.status="",this.userData.id=null,this.userData.modelFormVisible=!0},editUser(t){this.$axios.post(this.$api.editUserApi,{id:t}).then(e=>{this.userData.account=e.data["data"]["account"],this.userData.name=e.data["data"]["name"],this.userData.password="",this.userData.id=t;let a=this.roleData.map(t=>t.role_id).indexOf(e.data["data"]["role_id"]);this.form.role=this.roleData[a],this.userData.statusPassword=!1,this.userData.modelFormVisible=!0})},changeUserStatus(t){this.$axios.post(this.$api.changeStatusUserApi,{id:t}).then(t=>{this.messageShow(this,t),this.findUser()})},delUser(t){this.$axios.post(this.$api.delUserApi,{id:t}).then(t=>{this.messageShow(this,t),(this.currentPage-1)*this.sizePage+1===this.total&&(this.currentPage=this.currentPage-1),this.findUser()})},statusChineseShow(t){return 1===t?"正常":"冻结"}},mounted(){this.findUser()}},Re=We,He=Object(d["a"])(Re,Le,Ie,!1,null,null,null);He.options.__file="user.vue";var Ue=He.exports,qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sceneConfig"},[a("el-form",{staticClass:"demo-form-inline search-style",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"项目名称",labelWidth:"110px"}},[a("el-select",{attrs:{placeholder:"请选择项目"},model:{value:t.form.projectName,callback:function(e){t.$set(t.form,"projectName",e)},expression:"form.projectName"}},t._l(t.proAndIdData,function(t){return a("el-option",{key:t.name,attrs:{value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"配置名称"}},[a("el-input",{attrs:{placeholder:"请输入配置"},model:{value:t.form.configName,callback:function(e){t.$set(t.form,"configName",e)},expression:"form.configName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},nativeOn:{click:function(e){t.configHandleCurrentChange(1)}}},[t._v("\n                搜索\n            ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.$refs.configEditFunc.initConfigData()}}},[t._v("添加配置\n            ")])],1)],1),a("el-tabs",{staticClass:"table_padding",attrs:{value:"first"}},[a("el-tab-pane",{staticStyle:{margin:"0 0 -10px"},attrs:{label:"模块列表",name:"first"}},[a("el-table",{attrs:{data:t.tableData,"max-height":"748",stripe:""}},[a("el-table-column",{attrs:{prop:"num",label:"编号","min-width":"40"}}),a("el-table-column",{attrs:{prop:"name",label:"模块名称","min-width":"250"}}),a("el-table-column",{attrs:{label:"操作","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},nativeOn:{click:function(a){t.$refs.configEditFunc.editSceneConfig(t.tableData[e.$index]["id"])}}},[t._v("编辑\n                        ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(a){t.sureView(t.delConfig,t.tableData[e.$index]["id"],t.tableData[e.$index]["name"])}}},[t._v("删除\n                        ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.sizePage,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"current-change":t.configHandleCurrentChange,"size-change":t.configHandleSizeChange}})],1)],1)],1),a("configEdit",{ref:"configEditFunc",attrs:{proModelData:t.proModelData,projectName:t.form.projectName,funcAddress:t.funcAddress}})],1)},Be=[],Je={components:{configEdit:lt},name:"config",data(){return{proModelData:null,funcAddress:null,proAndIdData:"",tableData:Array(),total:1,currentPage:1,sizePage:20,form:{projectName:null,configName:null}}},methods:{httpSend(){this.$axios.get(this.$api.baseDataApi).then(t=>{t.data["user_pro"]&&(this.form.projectName=t.data["user_pro"]["pro_name"],this.findConfig()),this.proModelData=t.data["data"],this.proAndIdData=t.data["pro_and_id"]}),this.$axios.post(this.$api.getFuncAddressApi).then(t=>{this.funcAddress=t["data"]["data"]})},configHandleCurrentChange(t){this.currentPage=t,this.findConfig()},configHandleSizeChange(t){this.sizePage=t,this.findConfig()},findConfig(){this.$axios.post(this.$api.findConfigApi,{projectName:this.form.projectName,configName:this.form.configName,page:this.currentPage,sizePage:this.sizePage}).then(t=>{this.messageShow(this,t)&&(this.tableData=t.data["data"],this.total=t.data["total"])})},delConfig(t){this.$axios.post(this.$api.delConfigApi,{id:t}).then(t=>{this.messageShow(this,t),this.form.configName=null,(this.currentPage-1)*this.sizePage+1===this.total&&(this.currentPage=this.currentPage-1),this.findConfig()})}},mounted(){this.httpSend()}},Ke=Je,Ge=Object(d["a"])(Ke,qe,Be,!1,null,null,null);Ge.options.__file="config.vue";var Ye=Ge.exports,Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-login"},[a("div",{staticClass:"page-login--layer page-login--layer-area"},[a("ul",{staticClass:"circles"},t._l(10,function(t){return a("li",{key:t})}),0)]),a("div",{staticClass:"page-login--layer"},[a("div",{staticClass:"page-login--content",attrs:{flex:"dir:top main:justify cross:center box:justify"}},[a("div",{staticClass:"page-login--content-header"}),a("div",{staticClass:"page-login--content-main",attrs:{flex:"dir:top main:center cross:center"}},[a("div",{staticClass:"page-login--form"},[t._m(0),a("el-card",{attrs:{shadow:"never"}},[a("el-form",{ref:"loginForm",attrs:{"label-position":"top",size:"default"}},[a("el-form-item",[a("el-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},[a("i",{staticClass:"my-icon-yonghu",attrs:{slot:"prepend"},slot:"prepend"})])],1),a("el-form-item",[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("i",{staticClass:"my-icon-jianpan",attrs:{slot:"prepend"},slot:"prepend"})])],1),a("el-button",{staticClass:"button-login",attrs:{size:"default",type:"primary"},nativeOn:{click:function(e){t.login()}}},[t._v("\n                                登录\n                            ")])],1)],1),a("p",{staticClass:"page-login--options",attrs:{flex:"main:justify cross:center"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请联系管理员重置密码",placement:"bottom"}},[a("span",[t._v(" 忘记密码")])])],1)],1)]),t._m(1)])])])},Xe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-login--content-footer"},[a("p",{staticClass:"page-login--content-footer-copyright",staticStyle:{"font-size":"26px","font-weight":"700","font-family":"KaiTi"}},[t._v("\n                            测试平台\n                        ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-login--content-footer"},[a("p",{staticClass:"page-login--content-footer-copyright"})])}],Ze={data(){return{token:"",account:"",password:""}},methods:{login(){this.$axios.post(this.$api.loginApi,{account:this.account,password:this.password}).then(t=>{if(0===t.data["status"])this.$message({showClose:!0,message:t.data["msg"],type:"warning"});else if(this.token=t.data["token"],this.token){this.$store.commit(v,this.token),this.$store.commit(D,t.data["roles"]),this.$store.commit("roles",t.data["roles"]),this.$store.commit(y,t.data["name"]),this.$store.commit("userName",t.data["name"]);let e=decodeURIComponent(this.$route.query.redirect||"/manage/projectManage");this.$router.push({path:e})}})}}},ta=Ze,ea=(a("096e"),Object(d["a"])(ta,Qe,Xe,!1,null,null,null));ea.options.__file="login.vue";var aa=ea.exports;s["default"].use(f["a"]);const sa=[{path:"/manage",component:kt,children:[{path:"",components:{Header:A,Manage:jt},meta:{title:"首页入口"}},{path:"projectManage",meta:{title:"项目管理",requireAuth:!0,keepAlive:!0},components:{Header:A,Manage:jt}},{path:"sceneConfig",meta:{title:"业务配置",requireAuth:!0},components:{Header:A,Manage:Ye}},{path:"caseManage",meta:{title:"接口信息",requireAuth:!0},components:{Header:A,Manage:dt}},{path:"reportManage",meta:{title:"测试报告",requireAuth:!0},components:{Header:A,Manage:Ot}},{path:"reportShow",meta:{requireAuth:!0},components:{Header:Kt,Manage:Rt}},{path:"buildInFunc",meta:{title:"内置函数",requireAuth:!0},components:{Header:A,Manage:te}},{path:"sceneManage",meta:{title:"接口用例",requireAuth:!0},components:{Header:A,Manage:Se}},{path:"testTool",meta:{title:"工具页面",requireAuth:!0},components:{Header:A,Manage:Ne}},{path:"userManage",meta:{title:"用户管理",requireAuth:!0},components:{Header:A,Manage:Ue}},{path:"taskManage",meta:{title:"定时任务",requireAuth:!0},components:{Header:A,Manage:Ee}}]},{path:"/login",component:aa},{path:"",component:aa}];window.localStorage.getItem("token")&&x.commit(v,window.localStorage.getItem("token")),window.localStorage.getItem("roles")&&x.commit(D,window.localStorage.getItem("roles")),window.localStorage.getItem("userName")&&x.commit(y,window.localStorage.getItem("userName"));const ia=new f["a"]({routes:sa});ia.beforeEach((t,e,a)=>{t.matched.some(t=>t.meta.requireAuth)?x.state.token?a():a({path:"/login",query:{redirect:t.fullPath}}):a()});var na=ia;h.a.interceptors.response.use(t=>{return"登录超时,请重新登录"===t.data["msg"]&&na.push({path:"/login"}),t});var la=h.a,oa=a("40ea"),ra=a.n(oa),ca=a("9aba"),da=a.n(ca),pa=(a("64d2"),a("d768")),ua=a.n(pa),ma=a("2cd2"),ha=a.n(ma),fa=a("3e54"),ga=a.n(fa);const va="/api/proGather/list",ba="/api/func/getAddress",wa="/api/project/find",ya="/api/project/add",Da="/api/project/edit",xa="/api/project/del",_a="/api/report/find",ka="/api/report/del",Ca="/api/module/find",Sa="/api/module/add",$a="/api/module/edit",Aa="/api/module/del",Ma="/api/module/stick",ja="/api/config/find",za="/api/config/add",Na="/api/config/edit",Pa="/api/config/del",Ta="/api/login",Fa="/api/logout",Oa="/api/register",Va="/api/changePassword",Ea="/api/apiMsg/find",La="/api/apiMsg/del",Ia="/api/apiMsg/run",Wa="/api/apiMsg/add",Ra="/api/apiMsg/editAndCopy",Ha="/api/caseSet/find",Ua="/api/caseSet/del",qa="/api/caseSet/add",Ba="/api/caseSet/stick",Ja="/api/task/start",Ka="/api/task/pause",Ga="/api/task/resume",Ya="/api/task/remove",Qa="/api/task/run",Xa="/api/task/del",Za="/api/task/edit",ts="/api/task/add",es="/api/task/find",as="/api/case/find",ss="/api/case/del",is="/api/report/run",ns="/api/case/edit",ls="/api/case/add",os="/api/config/data",rs="/api/upload",cs="/api/checkFile",ds="/api/apiMsg/fileChange",ps="/api/func/find",us="/api/func/create",ms="/api/func/check",hs="/api/func/save",fs="/api/user/find",gs="/api/user/edit",vs="/api/user/del",bs="/api/user/changeStatus";var ws={baseDataApi:va,getFuncAddressApi:ba,checkFileApi:cs,findUserApi:fs,editUserApi:gs,delUserApi:vs,changeStatusUserApi:bs,findReportApi:_a,delReportApi:ka,findFuncApi:ps,createFuncApi:us,checkFuncApi:ms,saveFuncApi:hs,startTaskApi:Ja,pauseTaskApi:Ka,resumeTaskApi:Ga,removeTaskApi:Ya,runTaskApi:Qa,delTaskApi:Xa,editTaskApi:Za,addTaskApi:ts,findTaskApi:es,findCaseApi:as,delCaseApi:ss,runCaseApi:is,editCaseApi:ns,addCaseApi:ls,configDataApi:os,findCaseSetApi:Ha,delCaseSetApi:Ua,addCaseSetApi:qa,stickCaseSetApi:Ba,findProApi:wa,addProApi:ya,editProApi:Da,delProApi:xa,findModuleApi:Ca,addModuleApi:Sa,editModuleApi:$a,delModuleApi:Aa,stickModuleApi:Ma,findConfigApi:ja,addConfigApi:za,editConfigApi:Na,delConfigApi:Pa,loginApi:Ta,logoutApi:Fa,registerApi:Oa,changePasswordApi:Va,findApiApi:Ea,delApiApi:La,runApiApi:Ia,addApiApi:Wa,editAndCopyApiApi:Ra,fileUploadingApi:rs,importApiApi:ds};s["default"].config.productionTip=!1,s["default"].prototype.$api=ws,s["default"].prototype.$axios=la,s["default"].component(ra.a.name,ra.a),s["default"].component(ua.a.name,ua.a),s["default"].component(ha.a.name,ha.a),s["default"].use(ga.a),s["default"].use(n.a),s["default"].use(da.a),new s["default"]({router:na,store:x,el:"#app",render:t=>t(u)}).$mount("#app")},"64a9":function(t,e,a){},"69f6":function(t,e,a){},"8a0c":function(t,e,a){},"8fe9":function(t,e,a){},"9e83":function(t,e,a){"use strict";var s=a("4cff"),i=a.n(s);i.a},b388:function(t,e,a){"use strict";var s=a("69f6"),i=a.n(s);i.a},becf:function(t,e,a){"use strict";var s=a("fa27"),i=a.n(s);i.a},c4a8:function(t,e,a){"use strict";var s=a("1323"),i=a.n(s);i.a},c693:function(t,e,a){"use strict";var s=a("8fe9"),i=a.n(s);i.a},c8b3:function(t,e,a){},cb01:function(t,e,a){"use strict";var s=a("34f1"),i=a.n(s);i.a},d720:function(t,e,a){},ed2c:function(t,e,a){},efba:function(t,e,a){},fa27:function(t,e,a){},fa4c:function(t,e,a){"use strict";var s=a("8a0c"),i=a.n(s);i.a}});